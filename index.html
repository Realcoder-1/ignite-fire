<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IGNITE â€” FIRE Probability Engine</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400&family=SÃ¶hne+Mono:wght@400;500&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400&family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #080808;
  --bg2: #0e0e0f;
  --surface: #111112;
  --surface2: #161618;
  --border: #1e1e22;
  --border2: #2a2a30;
  --gold: #c9a84c;
  --gold2: #e8c96a;
  --gold-dim: rgba(201,168,76,0.15);
  --gold-glow: rgba(201,168,76,0.06);
  --green: #3d9970;
  --red: #c0392b;
  --text: #f0efe8;
  --text2: #8a8a8f;
  --text3: #4a4a52;
  --mono: 'DM Mono', monospace;
  --serif: 'Cormorant Garamond', serif;
  --sans: 'DM Sans', sans-serif;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  min-height: 100vh;
  overflow-x: hidden;
  cursor: crosshair;
}

/* Custom cursor */
.cursor {
  width: 6px; height: 6px;
  background: var(--gold);
  border-radius: 50%;
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  transition: transform 0.15s ease;
  mix-blend-mode: difference;
}

/* Grain */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9998;
}

/* â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.header {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 48px;
  border-bottom: 1px solid var(--border);
  background: rgba(8,8,8,0.9);
  backdrop-filter: blur(20px);
}

.logo-mark {
  display: flex;
  align-items: center;
  gap: 14px;
}

.logo-line {
  width: 32px;
  height: 1px;
  background: var(--gold);
}

.logo-text {
  font-family: var(--serif);
  font-size: 1.1rem;
  font-weight: 600;
  letter-spacing: 0.25em;
  color: var(--text);
  text-transform: uppercase;
}

.header-nav {
  display: flex;
  align-items: center;
  gap: 32px;
}

.nav-link {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  color: var(--text2);
  text-decoration: none;
  text-transform: uppercase;
  transition: color 0.2s;
}
.nav-link:hover { color: var(--gold); }

.btn-access {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 10px 24px;
  cursor: crosshair;
  font-weight: 500;
  transition: opacity 0.2s;
}
.btn-access:hover { opacity: 0.85; }

/* â”€â”€â”€ HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 0 48px 80px;
  position: relative;
  overflow: hidden;
}

.hero-bg {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 60% 50% at 70% 40%, rgba(201,168,76,0.04) 0%, transparent 70%),
    radial-gradient(ellipse 40% 60% at 20% 70%, rgba(61,153,112,0.03) 0%, transparent 60%);
}

.hero-grid {
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(var(--border) 1px, transparent 1px),
    linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 80px 80px;
  opacity: 0.3;
  mask-image: radial-gradient(ellipse 80% 80% at 50% 50%, black 20%, transparent 80%);
}

.hero-eyebrow {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.3em;
  color: var(--gold);
  text-transform: uppercase;
  margin-bottom: 24px;
  opacity: 0;
  animation: rise 0.8s 0.2s ease forwards;
  display: flex;
  align-items: center;
  gap: 16px;
}

.hero-eyebrow::before {
  content: '';
  display: block;
  width: 40px;
  height: 1px;
  background: var(--gold);
}

.hero-headline {
  font-family: var(--serif);
  font-size: clamp(4rem, 9vw, 9rem);
  font-weight: 300;
  line-height: 0.92;
  letter-spacing: -0.02em;
  color: var(--text);
  margin-bottom: 40px;
  opacity: 0;
  animation: rise 0.8s 0.35s ease forwards;
}

.hero-headline em {
  font-style: italic;
  color: var(--gold);
}

.hero-bottom {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  opacity: 0;
  animation: rise 0.8s 0.5s ease forwards;
}

.hero-desc {
  max-width: 420px;
  font-size: 0.95rem;
  color: var(--text2);
  line-height: 1.75;
  font-weight: 300;
}

.hero-stats {
  display: flex;
  gap: 48px;
}

.hero-stat-num {
  font-family: var(--serif);
  font-size: 2.8rem;
  font-weight: 300;
  color: var(--gold);
  line-height: 1;
  letter-spacing: -0.02em;
}

.hero-stat-label {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
  margin-top: 6px;
}

/* â”€â”€â”€ PROOF STRIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.proof-strip {
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  padding: 20px 48px;
  display: flex;
  align-items: center;
  gap: 48px;
  overflow: hidden;
}

.proof-item {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.1em;
  color: var(--text3);
  text-transform: uppercase;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 10px;
}

.proof-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--gold);
  flex-shrink: 0;
}

/* â”€â”€â”€ PAYWALL SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.paywall-section {
  padding: 120px 48px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 80px;
  align-items: center;
  border-bottom: 1px solid var(--border);
}

.paywall-left h2 {
  font-family: var(--serif);
  font-size: clamp(2.5rem, 4vw, 4rem);
  font-weight: 300;
  line-height: 1.1;
  letter-spacing: -0.02em;
  margin-bottom: 24px;
}

.paywall-left h2 em {
  font-style: italic;
  color: var(--gold);
}

.paywall-left p {
  color: var(--text2);
  font-size: 0.95rem;
  line-height: 1.75;
  font-weight: 300;
  margin-bottom: 40px;
  max-width: 400px;
}

.features-list {
  list-style: none;
  margin-bottom: 48px;
}

.features-list li {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 14px 0;
  border-bottom: 1px solid var(--border);
  font-size: 0.9rem;
  color: var(--text2);
  font-weight: 300;
}

.features-list li::before {
  content: 'â†’';
  color: var(--gold);
  flex-shrink: 0;
  font-family: var(--mono);
  font-size: 0.75rem;
  margin-top: 1px;
}

.price-block {
  display: flex;
  align-items: baseline;
  gap: 12px;
  margin-bottom: 8px;
}

.price-amount {
  font-family: var(--serif);
  font-size: 4rem;
  font-weight: 300;
  color: var(--gold);
  letter-spacing: -0.03em;
  line-height: 1;
}

.price-label {
  font-family: var(--mono);
  font-size: 0.65rem;
  color: var(--text3);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.price-note {
  font-family: var(--mono);
  font-size: 0.65rem;
  color: var(--text3);
  letter-spacing: 0.08em;
  margin-bottom: 32px;
}

.btn-buy {
  display: inline-flex;
  align-items: center;
  gap: 16px;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 18px 40px;
  font-family: var(--mono);
  font-size: 0.7rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  cursor: crosshair;
  font-weight: 500;
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
}

.btn-buy::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.1);
  transform: translateX(-100%);
  transition: transform 0.3s ease;
}

.btn-buy:hover::after { transform: translateX(0); }

.btn-buy-arrow { font-size: 1rem; }

.guarantee {
  margin-top: 16px;
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  letter-spacing: 0.08em;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Preview card */
.paywall-right {
  position: relative;
}

.preview-card {
  background: var(--surface);
  border: 1px solid var(--border2);
  padding: 32px;
  position: relative;
  overflow: hidden;
}

.preview-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.preview-blur {
  filter: blur(6px);
  opacity: 0.4;
  pointer-events: none;
  user-select: none;
}

.preview-lock {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  background: radial-gradient(ellipse at center, rgba(8,8,8,0.8) 0%, rgba(8,8,8,0.4) 100%);
}

.lock-icon {
  font-size: 2rem;
  filter: grayscale(1);
}

.lock-text {
  font-family: var(--serif);
  font-size: 1.4rem;
  font-weight: 300;
  color: var(--text);
  letter-spacing: 0.05em;
}

.lock-sub {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
}

/* Fake chart lines */
.fake-chart {
  height: 140px;
  position: relative;
  margin-bottom: 24px;
}

.fake-line {
  position: absolute;
  height: 1px;
  left: 0; right: 0;
  background: var(--border);
}

.fake-line-1 { top: 20%; }
.fake-line-2 { top: 50%; }
.fake-line-3 { top: 80%; }

.fake-path {
  position: absolute;
  inset: 0;
}

.fake-score-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
}

.fake-score {
  background: var(--surface2);
  border: 1px solid var(--border);
  padding: 14px;
}

.fake-score-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.12em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 8px;
}

.fake-score-val {
  font-family: var(--serif);
  font-size: 1.6rem;
  font-weight: 300;
  letter-spacing: -0.02em;
}

/* â”€â”€â”€ APP (LOCKED BY DEFAULT) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.app-section {
  display: none;
  padding: 80px 48px;
  animation: fadeIn 0.6s ease;
}

.app-section.unlocked {
  display: block;
}

/* Score cards */
.scores-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 2px;
  margin-bottom: 2px;
}

.score-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 28px 32px;
  position: relative;
  overflow: hidden;
  transition: border-color 0.3s;
}

.score-card::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: var(--gold);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 1s cubic-bezier(0.16,1,0.3,1);
}

.score-card.lit::after { transform: scaleX(1); }

.score-tag {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.2em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 16px;
}

.score-num {
  font-family: var(--serif);
  font-size: 3.2rem;
  font-weight: 300;
  letter-spacing: -0.03em;
  line-height: 1;
  transition: color 0.5s;
}

.score-sub {
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  margin-top: 10px;
  letter-spacing: 0.05em;
}

.score-bar {
  height: 2px;
  background: var(--border);
  margin-top: 16px;
  overflow: hidden;
}

.score-bar-fill {
  height: 100%;
  transition: width 1.2s cubic-bezier(0.16,1,0.3,1);
}

/* Main layout */
.app-layout {
  display: grid;
  grid-template-columns: 360px 1fr;
  gap: 2px;
  margin-bottom: 2px;
}

.inputs-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
}

.panel-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.22em;
  color: var(--text3);
  text-transform: uppercase;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 28px;
}

.input-group { margin-bottom: 22px; }

.input-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}

.input-name {
  font-size: 0.8rem;
  color: var(--text2);
  font-weight: 300;
}

.input-val {
  font-family: var(--mono);
  font-size: 0.8rem;
  color: var(--gold);
}

input[type="range"] {
  -webkit-appearance: none;
  width: 100%;
  height: 1px;
  background: var(--border2);
  outline: none;
  cursor: crosshair;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
  background: var(--gold);
  border-radius: 50%;
  cursor: crosshair;
  transition: transform 0.15s;
}

input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.4); }

.divider { border: none; border-top: 1px solid var(--border); margin: 24px 0; }

.select-field {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 10px 12px;
  font-family: var(--mono);
  font-size: 0.75rem;
  outline: none;
  cursor: crosshair;
  appearance: none;
}

.run-btn {
  width: 100%;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 16px;
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  cursor: crosshair;
  font-weight: 500;
  margin-top: 8px;
  transition: opacity 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.run-btn:hover { opacity: 0.88; }
.run-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* Chart */
.chart-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
  display: flex;
  flex-direction: column;
}

.chart-tabs {
  display: flex;
  gap: 2px;
  margin-bottom: 24px;
}

.tab-btn {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text3);
  cursor: crosshair;
  transition: all 0.2s;
}

.tab-btn.active {
  background: var(--gold);
  color: #080808;
  border-color: var(--gold);
}

canvas { width: 100% !important; flex: 1; }

/* Stats */
.stats-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 2px;
  margin-bottom: 2px;
}

.stat-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 20px 24px;
}

.stat-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 10px;
}

.stat-val {
  font-family: var(--mono);
  font-size: 1.2rem;
  font-weight: 500;
}

/* Scenarios */
.scenarios-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
  margin-bottom: 2px;
}

.scenarios-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 20px;
}

.scenario-btn {
  background: var(--surface2);
  border: 1px solid var(--border);
  padding: 18px;
  cursor: crosshair;
  text-align: left;
  transition: border-color 0.2s;
}

.scenario-btn:hover { border-color: var(--gold); }

.scenario-name {
  font-family: var(--sans);
  font-size: 0.82rem;
  font-weight: 400;
  color: var(--text);
  margin-bottom: 4px;
}

.scenario-desc {
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  line-height: 1.5;
  letter-spacing: 0.03em;
}

/* â”€â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.footer {
  border-top: 1px solid var(--border);
  padding: 32px 48px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.footer-left {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  color: var(--text3);
}

.footer-right {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  color: var(--text3);
}

/* â”€â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.92);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  backdrop-filter: blur(8px);
}

.modal-overlay.open {
  opacity: 1;
  pointer-events: all;
}

.modal {
  background: var(--surface);
  border: 1px solid var(--border2);
  padding: 56px;
  width: 520px;
  max-width: 92vw;
  transform: translateY(24px);
  transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
  position: relative;
}

.modal::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.modal-overlay.open .modal { transform: translateY(0); }

.modal-eyebrow {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.2em;
  color: var(--gold);
  text-transform: uppercase;
  margin-bottom: 16px;
}

.modal h2 {
  font-family: var(--serif);
  font-size: 2.8rem;
  font-weight: 300;
  line-height: 1.05;
  letter-spacing: -0.02em;
  margin-bottom: 8px;
}

.modal-price {
  font-family: var(--mono);
  font-size: 0.7rem;
  color: var(--gold);
  margin-bottom: 32px;
  letter-spacing: 0.08em;
}

.modal-features {
  list-style: none;
  margin-bottom: 40px;
}

.modal-features li {
  font-size: 0.88rem;
  color: var(--text2);
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
  display: flex;
  gap: 12px;
  font-weight: 300;
  line-height: 1.5;
}

.modal-features li::before {
  content: 'âœ¦';
  color: var(--gold);
  font-size: 0.7rem;
  flex-shrink: 0;
  margin-top: 2px;
}

.modal-close {
  position: absolute;
  top: 24px; right: 24px;
  background: none;
  border: none;
  color: var(--text3);
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  cursor: crosshair;
  text-transform: uppercase;
}

.modal-close:hover { color: var(--text); }

/* â”€â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes rise {
  from { opacity: 0; transform: translateY(24px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.7s ease, transform 0.7s ease;
}
.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 900px) {
  .header { padding: 16px 24px; }
  .header-nav { display: none; }
  .hero { padding: 100px 24px 60px; }
  .hero-bottom { flex-direction: column; gap: 32px; align-items: flex-start; }
  .hero-stats { gap: 32px; }
  .proof-strip { padding: 16px 24px; }
  .paywall-section { grid-template-columns: 1fr; padding: 80px 24px; gap: 48px; }
  .app-section { padding: 48px 24px; }
  .scores-grid { grid-template-columns: 1fr; }
  .app-layout { grid-template-columns: 1fr; }
  .stats-row { grid-template-columns: 1fr 1fr; }
  .scenarios-grid { grid-template-columns: 1fr 1fr; }
  .footer { flex-direction: column; gap: 12px; padding: 24px; text-align: center; }
  .modal { padding: 36px 28px; }
}
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>

<!-- HEADER -->
<header class="header">
  <div class="logo-mark">
    <div class="logo-line"></div>
    <div class="logo-text">Ignite</div>
  </div>
  <nav class="header-nav">
    <a href="#how" class="nav-link">How it works</a>
    <a href="#pricing" class="nav-link">Pricing</a>
    <button class="btn-access" onclick="openModal()">Get Access â€” $39</button>
  </nav>
</header>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid"></div>

  <div class="hero-eyebrow">Monte Carlo Retirement Engine</div>

  <h1 class="hero-headline">
    Will your<br>
    money <em>last?</em>
  </h1>

  <div class="hero-bottom">
    <p class="hero-desc">
      10,000 simulations run in seconds. One number tells you everything. Built for the FIRE community â€” by people who take early retirement seriously.
    </p>
    <div class="hero-stats">
      <div>
        <div class="hero-stat-num">10K</div>
        <div class="hero-stat-label">Simulations per run</div>
      </div>
      <div>
        <div class="hero-stat-num">3</div>
        <div class="hero-stat-label">Seconds to result</div>
      </div>
      <div>
        <div class="hero-stat-num">$39</div>
        <div class="hero-stat-label">One-time. Forever.</div>
      </div>
    </div>
  </div>
</section>

<!-- PROOF STRIP -->
<div class="proof-strip">
  <div class="proof-item"><div class="proof-dot"></div>Monte Carlo Simulation</div>
  <div class="proof-item"><div class="proof-dot"></div>Safe Withdrawal Rate Analysis</div>
  <div class="proof-item"><div class="proof-dot"></div>Coast FIRE Calculator</div>
  <div class="proof-item"><div class="proof-dot"></div>Sequence of Returns Risk</div>
  <div class="proof-item"><div class="proof-dot"></div>Withdrawal Ladder Modeling</div>
  <div class="proof-item"><div class="proof-dot"></div>No Subscription. Ever.</div>
</div>

<!-- PAYWALL SECTION -->
<section class="paywall-section" id="pricing">
  <div class="paywall-left reveal">
    <h2>The only number<br>that <em>actually matters</em></h2>
    <p>
      Your FIRE Probability Score. How likely is your money to last 40+ years across 10,000 simulated market scenarios â€” including crashes, inflation shocks, and lost decades.
    </p>

    <ul class="features-list">
      <li>Full Monte Carlo with 10,000 retirement path simulations</li>
      <li>FIRE date calculator at current savings rate</li>
      <li>Coast FIRE number â€” when you can stop saving</li>
      <li>Stress test: Base, Conservative, and Bull market scenarios</li>
      <li>Withdrawal ladder â€” see inflation erode your spending power</li>
      <li>P10 / Median / P90 percentile path visualization</li>
      <li>Safe Withdrawal Rate sensitivity analysis</li>
    </ul>

    <div class="price-block">
      <div class="price-amount">$39</div>
      <div>
        <div class="price-label">One-time payment</div>
        <div class="price-label" style="color:var(--green); margin-top:2px;">Lifetime access</div>
      </div>
    </div>
    <div class="price-note">No subscription. No renewal. Own it forever.</div>

    <button class="btn-buy" onclick="openModal()">
      <span>Unlock Full Access</span>
      <span class="btn-buy-arrow">â†’</span>
    </button>

    <div class="guarantee">
      <span>â—</span>
      <span>30-day money back guarantee Â· Instant access Â· No account required</span>
    </div>
  </div>

  <div class="paywall-right reveal">
    <div class="preview-card">
      <!-- Blurred preview of the app -->
      <div class="preview-blur">
        <div class="fake-score-row" style="margin-bottom:20px;">
          <div class="fake-score">
            <div class="fake-score-label">FIRE Probability</div>
            <div class="fake-score-val" style="color:var(--green)">87.3%</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">FIRE Age</div>
            <div class="fake-score-val" style="color:var(--gold)">48</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Coast FIRE</div>
            <div class="fake-score-val">$312K</div>
          </div>
        </div>

        <div class="fake-chart">
          <div class="fake-line fake-line-1"></div>
          <div class="fake-line fake-line-2"></div>
          <div class="fake-line fake-line-3"></div>
          <svg class="fake-path" viewBox="0 0 400 140" preserveAspectRatio="none">
            <path d="M0,100 C50,90 100,60 150,70 C200,80 250,30 300,20 C350,10 380,15 400,10" stroke="#3d9970" stroke-width="1.5" fill="none" opacity="0.6"/>
            <path d="M0,110 C50,105 100,80 150,85 C200,90 250,55 300,45 C350,35 380,40 400,38" stroke="#c9a84c" stroke-width="2" fill="none"/>
            <path d="M0,120 C50,118 100,110 150,115 C200,120 250,100 300,108 C350,116 380,112 400,120" stroke="#c0392b" stroke-width="1.5" fill="none" opacity="0.6"/>
          </svg>
        </div>

        <div class="fake-score-row">
          <div class="fake-score">
            <div class="fake-score-label">Median End</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--gold)">$2.4M</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Worst 10%</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--red)">$0</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Best 90%</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--green)">$6.1M</div>
          </div>
        </div>
      </div>

      <div class="preview-lock">
        <div class="lock-icon">ğŸ”’</div>
        <div class="lock-text">Full Access â€” $39</div>
        <div class="lock-sub">One-time Â· Lifetime Â· Instant</div>
        <button class="btn-buy" style="margin-top:16px; font-size:0.6rem; padding:14px 28px;" onclick="openModal()">
          Unlock Now â†’
        </button>
      </div>
    </div>
  </div>
</section>

<!-- APP SECTION (hidden until unlocked) -->
<section class="app-section" id="appSection">
  <div style="margin-bottom:48px;">
    <div style="font-family:var(--mono);font-size:0.55rem;letter-spacing:0.22em;color:var(--gold);text-transform:uppercase;margin-bottom:8px;">// Full Access Unlocked</div>
    <h2 style="font-family:var(--serif);font-size:2.5rem;font-weight:300;letter-spacing:-0.02em;">Your FIRE Simulator</h2>
  </div>

  <!-- Score Cards -->
  <div class="scores-grid" style="margin-bottom:2px;">
    <div class="score-card" id="probCard">
      <div class="score-tag">FIRE Probability</div>
      <div class="score-num" id="probScore" style="color:var(--text2)">â€”</div>
      <div class="score-sub" id="probSub">Run simulation to calculate</div>
      <div class="score-bar"><div class="score-bar-fill" id="probBar" style="width:0%;background:var(--gold)"></div></div>
    </div>
    <div class="score-card">
      <div class="score-tag">FIRE Age</div>
      <div class="score-num" id="fireAge" style="color:var(--text2)">â€”</div>
      <div class="score-sub" id="fireAgeSub">At current savings rate</div>
    </div>
    <div class="score-card">
      <div class="score-tag">Coast FIRE Number</div>
      <div class="score-num" id="coastNum" style="font-size:2rem;color:var(--text2)">â€”</div>
      <div class="score-sub" id="coastSub">Amount needed to coast</div>
    </div>
  </div>

  <!-- Main Layout -->
  <div class="app-layout">
    <div class="inputs-panel">
      <div class="panel-label">// Portfolio Parameters</div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Current Portfolio</span>
          <span class="input-val" id="portVal">$500K</span>
        </div>
        <input type="range" id="portfolio" min="10000" max="5000000" step="10000" value="500000" oninput="fmtSlider('portVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Annual Spending (Retirement)</span>
          <span class="input-val" id="spendVal">$40K</span>
        </div>
        <input type="range" id="spending" min="10000" max="200000" step="1000" value="40000" oninput="fmtSlider('spendVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Annual Savings (Now)</span>
          <span class="input-val" id="savingsVal">$30K</span>
        </div>
        <input type="range" id="savings" min="0" max="200000" step="1000" value="30000" oninput="fmtSlider('savingsVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Current Age</span>
          <span class="input-val" id="ageVal">35</span>
        </div>
        <input type="range" id="currentAge" min="20" max="65" step="1" value="35" oninput="fmtSlider('ageVal',this.value,'plain')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Target Retirement Age</span>
          <span class="input-val" id="retireVal">50</span>
        </div>
        <input type="range" id="retireAge" min="30" max="75" step="1" value="50" oninput="fmtSlider('retireVal',this.value,'plain')">
      </div>

      <div class="divider"></div>
      <div class="panel-label">// Market Assumptions</div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Expected Return</span>
          <span class="input-val" id="retVal">7.0%</span>
        </div>
        <input type="range" id="returnRate" min="3" max="12" step="0.1" value="7" oninput="fmtSlider('retVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Safe Withdrawal Rate</span>
          <span class="input-val" id="swrVal">4.0%</span>
        </div>
        <input type="range" id="swr" min="2" max="6" step="0.1" value="4" oninput="fmtSlider('swrVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Inflation Rate</span>
          <span class="input-val" id="inflVal">3.0%</span>
        </div>
        <input type="range" id="inflation" min="1" max="6" step="0.1" value="3" oninput="fmtSlider('inflVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row"><span class="input-name">Retirement Duration</span></div>
        <select class="select-field" id="duration">
          <option value="30">30 years</option>
          <option value="40" selected>40 years</option>
          <option value="50">50 years</option>
          <option value="60">60 years</option>
        </select>
      </div>

      <button class="run-btn" id="runBtn" onclick="runSim()">
        <span>â–¶ Run 10,000 Simulations</span>
      </button>
    </div>

    <div class="chart-panel">
      <div class="panel-label">// Monte Carlo Output</div>
      <div class="chart-tabs">
        <button class="tab-btn active" onclick="switchTab('mc',this)">Paths</button>
        <button class="tab-btn" onclick="switchTab('dist',this)">Distribution</button>
        <button class="tab-btn" onclick="switchTab('ladder',this)">Withdrawal Ladder</button>
      </div>
      <canvas id="mainChart" height="320"></canvas>
    </div>
  </div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-label">Median Portfolio End</div>
      <div class="stat-val" id="statMedian" style="color:var(--gold)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Worst 10th Percentile</div>
      <div class="stat-val" id="statWorst" style="color:var(--red)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Best 90th Percentile</div>
      <div class="stat-val" id="statBest" style="color:var(--green)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Required FIRE Number</div>
      <div class="stat-val" id="statFire">â€”</div>
    </div>
  </div>

  <!-- Scenarios -->
  <div class="scenarios-panel">
    <div class="panel-label">// Quick Scenarios</div>
    <div class="scenarios-grid">
      <button class="scenario-btn" onclick="applyScenario('base')">
        <div class="scenario-name">Base Case</div>
        <div class="scenario-desc">7% return Â· 3% inflation Â· Historical US average</div>
      </button>
      <button class="scenario-btn" onclick="applyScenario('conservative')">
        <div class="scenario-name">Conservative</div>
        <div class="scenario-desc">5% return Â· 3.5% inflation Â· Lower-return decade</div>
      </button>
      <button class="scenario-btn" onclick="applyScenario('bull')">
        <div class="scenario-name">Bull Market</div>
        <div class="scenario-desc">9% return Â· 2.5% inflation Â· Strong equity run</div>
      </button>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-left">Â© 2025 IGNITE â€” FIRE Probability Engine</div>
  <div class="footer-right">Built for the FIRE community Â· No subscription Â· No tracking</div>
</footer>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModalOutside(event)">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">âœ• Close</button>
    <div class="modal-eyebrow">One-time purchase Â· Lifetime access</div>
    <h2>Unlock<br>Full Access</h2>
    <div class="modal-price">$39 Â· Pay once Â· Use forever Â· 30-day guarantee</div>

    <ul class="modal-features">
      <li>10,000 Monte Carlo retirement path simulations</li>
      <li>FIRE Probability Score â€” one number, total clarity</li>
      <li>FIRE date calculator at current savings trajectory</li>
      <li>Coast FIRE number â€” when you can stop contributing</li>
      <li>Safe Withdrawal Rate sensitivity testing</li>
      <li>Withdrawal ladder with inflation modeling</li>
      <li>Base, Conservative, and Bull market scenarios</li>
      <li>P10 / Median / P90 percentile visualizations</li>
    </ul>

    <button class="btn-buy" style="width:100%;justify-content:center;" onclick="handlePurchase()">
      Pay $39 â€” Get Instant Access â†’
    </button>

    <div class="guarantee" style="margin-top:16px;justify-content:center;">
      <span>â—</span>
      <span>30-day money back guarantee Â· Secure payment via Stripe</span>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<script>
// â”€â”€â”€ Cursor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const cur = document.getElementById('cursor');
document.addEventListener('mousemove', e => {
  cur.style.left = e.clientX - 3 + 'px';
  cur.style.top  = e.clientY - 3 + 'px';
});

// â”€â”€â”€ Reveal on scroll â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const obs = new IntersectionObserver(entries => {
  entries.forEach((e, i) => {
    if (e.isIntersecting) {
      setTimeout(() => e.target.classList.add('visible'), i * 120);
    }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

// â”€â”€â”€ Paywall â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DEMO MODE: set to true to bypass paywall for testing
const DEMO_MODE = false;
let unlocked = DEMO_MODE;

// Check localStorage for purchase
if (localStorage.getItem('ignite_unlocked') === 'true') unlocked = true;
if (unlocked) showApp();

function handlePurchase() {
  // REPLACE THIS URL with your Stripe / Lemon Squeezy checkout link
  const CHECKOUT_URL = 'https://buy.stripe.com/YOUR_LINK_HERE';
  window.location.href = CHECKOUT_URL;

  // FOR DEMO/TESTING â€” comment out above and uncomment below:
  // unlocked = true;
  // localStorage.setItem('ignite_unlocked', 'true');
  // closeModal();
  // showApp();
  // document.getElementById('appSection').scrollIntoView({ behavior: 'smooth' });
}

function showApp() {
  document.getElementById('appSection').classList.add('unlocked');
  setTimeout(runSim, 300);
}

// â”€â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openModal() {
  if (unlocked) {
    document.getElementById('appSection').scrollIntoView({ behavior: 'smooth' });
    return;
  }
  document.getElementById('modalOverlay').classList.add('open');
}
function closeModal() { document.getElementById('modalOverlay').classList.remove('open'); }
function closeModalOutside(e) { if (e.target.id === 'modalOverlay') closeModal(); }

// â”€â”€â”€ Formatting â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function fmt(n) {
  const a = Math.abs(n);
  if (a >= 1e6) return '$' + (n/1e6).toFixed(2) + 'M';
  if (a >= 1e3) return '$' + (n/1e3).toFixed(0) + 'K';
  return '$' + Math.round(n);
}

function fmtSlider(id, val, type) {
  val = parseFloat(val);
  let out;
  if (type === 'money') out = fmt(val);
  else if (type === 'pct') out = val.toFixed(1) + '%';
  else out = String(Math.round(val));
  document.getElementById(id).textContent = out;
}

// â”€â”€â”€ Simulation Engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function randNorm(mean, std) {
  let u = 0, v = 0;
  while (!u) u = Math.random();
  while (!v) v = Math.random();
  return mean + std * Math.sqrt(-2 * Math.log(u)) * Math.cos(2 * Math.PI * v);
}

function monteCarlo(p, n = 10000) {
  const { portfolio, spending, savings, currentAge, retireAge, returnRate, inflation, duration } = p;
  const yrs = Math.max(0, retireAge - currentAge);
  const vol = 0.16;
  let successes = 0;
  const finals = [];
  const allPaths = [];

  for (let i = 0; i < n; i++) {
    let bal = portfolio;
    for (let y = 0; y < yrs; y++) bal = bal * (1 + randNorm(returnRate, vol)) + savings;

    const path = [Math.max(bal, 0)];
    let failed = false;
    for (let y = 0; y < duration; y++) {
      bal = bal * (1 + randNorm(returnRate - 0.005, vol)) - spending * Math.pow(1 + inflation, y);
      path.push(Math.max(bal, 0));
      if (bal <= 0) { failed = true; break; }
    }
    if (!failed) successes++;
    finals.push(bal);
    allPaths.push(path);
  }

  allPaths.sort((a, b) => (b[b.length-1]||0) - (a[a.length-1]||0));
  finals.sort((a, b) => a - b);

  return {
    probability: (successes / n) * 100,
    p10: allPaths[Math.floor(n * 0.9)],
    p50: allPaths[Math.floor(n * 0.5)],
    p90: allPaths[Math.floor(n * 0.1)],
    median: finals[Math.floor(n * 0.5)],
    worst10: Math.max(finals[Math.floor(n * 0.1)], 0),
    best90: finals[Math.floor(n * 0.9)],
    finals,
  };
}

function getParams() {
  return {
    portfolio:  +document.getElementById('portfolio').value,
    spending:   +document.getElementById('spending').value,
    savings:    +document.getElementById('savings').value,
    currentAge: +document.getElementById('currentAge').value,
    retireAge:  +document.getElementById('retireAge').value,
    returnRate: +document.getElementById('returnRate').value / 100,
    swr:        +document.getElementById('swr').value / 100,
    inflation:  +document.getElementById('inflation').value / 100,
    duration:   +document.getElementById('duration').value,
  };
}

function calcFire(p) {
  const fireNum = p.spending / p.swr;
  let bal = p.portfolio, yrs = 0;
  while (bal < fireNum && yrs < 60) { bal = bal * 1.07 + p.savings; yrs++; }
  return { fireNum, fireAge: p.currentAge + yrs, yrs };
}

function calcCoast(p) {
  const fireNum = p.spending / p.swr;
  return fireNum / Math.pow(1.07, Math.max(1, p.retireAge - p.currentAge));
}

// â”€â”€â”€ Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let chart = null, curTab = 'mc', lastResults = null, lastParams = null;

function switchTab(tab, el) {
  curTab = tab;
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  if (lastResults) renderChart(lastResults, lastParams);
}

function renderChart(r, p) {
  const ctx = document.getElementById('mainChart').getContext('2d');
  if (chart) chart.destroy();

  const dur = p.duration;
  const labels = Array.from({length: dur + 1}, (_, i) => p.retireAge + i);

  const baseOpts = {
    responsive: true,
    maintainAspectRatio: true,
    animation: { duration: 700, easing: 'easeOutQuart' },
    plugins: {
      legend: { display: curTab !== 'mc', labels: { color: '#4a4a52', font: { family: 'DM Mono', size: 9 } } },
      tooltip: {
        backgroundColor: '#161618',
        borderColor: '#2a2a30',
        borderWidth: 1,
        titleColor: '#c9a84c',
        bodyColor: '#8a8a8f',
        titleFont: { family: 'DM Mono', size: 9 },
        bodyFont:  { family: 'DM Mono', size: 9 },
      }
    },
    scales: {
      x: { grid: { color: 'rgba(255,255,255,0.02)' }, ticks: { color: '#4a4a52', font: { family: 'DM Mono', size: 8 }, maxTicksLimit: 8 } },
      y: { grid: { color: 'rgba(255,255,255,0.03)' }, ticks: { color: '#4a4a52', font: { family: 'DM Mono', size: 8 } } },
    }
  };

  if (curTab === 'mc') {
    chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [
          { label: 'P90', data: r.p90?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(61,153,112,0.7)', borderWidth:2, pointRadius:0, fill:false, tension:0.3 },
          { label: 'Median', data: r.p50?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(201,168,76,0.95)', borderWidth:2.5, pointRadius:0, fill:false, tension:0.3 },
          { label: 'P10', data: r.p10?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(192,57,43,0.7)', borderWidth:2, pointRadius:0, fill:false, tension:0.3 },
        ]
      },
      options: { ...baseOpts }
    });
  } else if (curTab === 'dist') {
    const vals = r.finals.map(v => v/1e6);
    const mx = Math.min(Math.max(...vals.filter(v=>v<100)), 20);
    const mn = Math.min(...vals);
    const bins = 40, bs = (mx - mn) / bins;
    const counts = new Array(bins).fill(0);
    vals.forEach(v => { const i = Math.min(Math.floor((v-mn)/bs), bins-1); if (i>=0) counts[i]++; });
    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: counts.map((_,i) => (mn + i*bs).toFixed(1)),
        datasets: [{ label: 'Simulations', data: counts, backgroundColor: counts.map((_,i) => (mn+i*bs)<=0 ? 'rgba(192,57,43,0.5)' : 'rgba(201,168,76,0.4)'), borderWidth:0 }]
      },
      options: { ...baseOpts }
    });
  } else {
    const yrs = Array.from({length: dur}, (_, i) => i + 1);
    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: yrs.map(y => p.retireAge + y),
        datasets: [
          { label: 'Nominal ($K)', data: yrs.map(y => p.spending * Math.pow(1+p.inflation,y)/1e3), backgroundColor:'rgba(201,168,76,0.4)', borderWidth:0 },
          { label: "Real (Today's $K)", data: yrs.map(() => p.spending/1e3), backgroundColor:'rgba(61,153,112,0.3)', borderWidth:0 },
        ]
      },
      options: { ...baseOpts }
    });
  }
}

// â”€â”€â”€ Run Simulation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function runSim() {
  const btn = document.getElementById('runBtn');
  btn.disabled = true;
  btn.querySelector('span').textContent = 'âŸ³ Simulating 10,000 paths...';

  setTimeout(() => {
    const p = getParams();
    const r = monteCarlo(p);
    const fi = calcFire(p);
    const coast = calcCoast(p);
    lastResults = r; lastParams = p;

    // Update scores
    const prob = r.probability;
    const pEl = document.getElementById('probScore');
    pEl.textContent = prob.toFixed(1) + '%';
    pEl.style.color = prob >= 85 ? 'var(--green)' : prob >= 65 ? 'var(--gold)' : 'var(--red)';
    document.getElementById('probSub').textContent = prob >= 85 ? 'High confidence â€” solid plan' : prob >= 65 ? 'Moderate â€” consider adjustments' : 'High risk â€” revise now';
    document.getElementById('probBar').style.width = prob + '%';
    document.getElementById('probBar').style.background = prob >= 85 ? 'var(--green)' : prob >= 65 ? 'var(--gold)' : 'var(--red)';
    document.getElementById('probCard').classList.add('lit');

    document.getElementById('fireAge').textContent = fi.fireAge <= p.currentAge + 60 ? fi.fireAge : '70+';
    document.getElementById('fireAge').style.color = fi.fireAge <= p.retireAge ? 'var(--green)' : 'var(--gold)';
    document.getElementById('fireAgeSub').textContent = fi.fireAge <= p.retireAge ? `${fi.yrs} yrs â€” on track âœ“` : `${fi.yrs} yrs â€” ${fi.fireAge - p.retireAge} past target`;

    document.getElementById('coastNum').textContent = fmt(coast);
    document.getElementById('coastNum').style.color = p.portfolio >= coast ? 'var(--green)' : 'var(--text2)';
    document.getElementById('coastSub').textContent = p.portfolio >= coast ? 'âœ“ Coast FIRE achieved!' : `Need ${fmt(coast - p.portfolio)} more`;

    document.getElementById('statMedian').textContent = fmt(r.median);
    document.getElementById('statWorst').textContent = fmt(r.worst10);
    document.getElementById('statBest').textContent = fmt(r.best90);
    document.getElementById('statFire').textContent = fmt(fi.fireNum);

    renderChart(r, p);

    btn.disabled = false;
    btn.querySelector('span').textContent = 'â–¶ Run 10,000 Simulations';
  }, 60);
}

function applyScenario(name) {
  const s = { base:{ret:7,inf:3}, conservative:{ret:5,inf:3.5}, bull:{ret:9,inf:2.5} }[name];
  document.getElementById('returnRate').value = s.ret;
  document.getElementById('inflation').value = s.inf;
  document.getElementById('retVal').textContent = s.ret.toFixed(1) + '%';
  document.getElementById('inflVal').textContent = s.inf.toFixed(1) + '%';
  runSim();
}
</script>
</body>
</html>  background: rgba(8,8,9,0.95);
  backdrop-filter: blur(24px);
}
.logo { display: flex; align-items: center; gap: 14px; }
.logo-rule { width: 28px; height: 1px; background: var(--gold); }
.logo-name { font-family: var(--serif); font-size: 1rem; font-weight: 600; letter-spacing: 0.3em; text-transform: uppercase; }
.header-right { display: flex; align-items: center; gap: 28px; }
.nav-link { font-family: var(--mono); font-size: 0.62rem; letter-spacing: 0.14em; color: var(--text3); text-decoration: none; text-transform: uppercase; transition: color 0.2s; }
.nav-link:hover { color: var(--gold); }
.btn-cta { font-family: var(--mono); font-size: 0.62rem; letter-spacing: 0.16em; text-transform: uppercase; background: var(--gold); color: #080809; border: none; padding: 10px 22px; cursor: pointer; font-weight: 500; transition: opacity 0.18s; }
.btn-cta:hover { opacity: 0.84; }

/* â”€â”€ HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero {
  min-height: 100vh; display: flex; flex-direction: column;
  justify-content: flex-end; padding: 0 48px 88px; position: relative; overflow: hidden;
}
.hero-bg {
  position: absolute; inset: 0;
  background: radial-gradient(ellipse 55% 55% at 72% 38%, rgba(200,168,75,0.05) 0%, transparent 70%),
              radial-gradient(ellipse 40% 50% at 18% 72%, rgba(58,144,104,0.03) 0%, transparent 65%);
}
.hero-grid {
  position: absolute; inset: 0;
  background-image: linear-gradient(var(--border) 1px, transparent 1px), linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 72px 72px; opacity: 0.28;
  mask-image: radial-gradient(ellipse 85% 75% at 50% 50%, black 10%, transparent 80%);
}
.hero-tag {
  font-family: var(--mono); font-size: 0.58rem; letter-spacing: 0.32em; color: var(--gold);
  text-transform: uppercase; margin-bottom: 22px; display: flex; align-items: center; gap: 14px;
  opacity: 0; animation: rise 0.7s 0.15s ease forwards;
}
.hero-tag::before { content: ''; width: 36px; height: 1px; background: var(--gold); display: block; }
.hero-h1 {
  font-family: var(--serif); font-size: clamp(4.5rem, 9.5vw, 10rem);
  font-weight: 300; line-height: 0.9; letter-spacing: -0.025em; margin-bottom: 44px;
  opacity: 0; animation: rise 0.7s 0.28s ease forwards;
}
.hero-h1 em { font-style: italic; color: var(--gold); }
.hero-foot {
  display: flex; align-items: flex-end; justify-content: space-between;
  opacity: 0; animation: rise 0.7s 0.42s ease forwards;
}
.hero-desc { max-width: 400px; font-size: 0.92rem; color: var(--text2); line-height: 1.8; font-weight: 300; }
.hero-kpis { display: flex; gap: 52px; }
.kpi-num { font-family: var(--serif); font-size: 3rem; font-weight: 300; color: var(--gold); letter-spacing: -0.03em; line-height: 1; }
.kpi-label { font-family: var(--mono); font-size: 0.58rem; letter-spacing: 0.14em; color: var(--text3); text-transform: uppercase; margin-top: 7px; }

/* â”€â”€ TICKER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ticker { border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); padding: 18px 48px; display: flex; gap: 52px; overflow: hidden; }
.ticker-item { font-family: var(--mono); font-size: 0.62rem; letter-spacing: 0.1em; color: var(--text3); text-transform: uppercase; white-space: nowrap; display: flex; align-items: center; gap: 10px; flex-shrink: 0; }
.ticker-dot { width: 3px; height: 3px; border-radius: 50%; background: var(--gold); }

/* â”€â”€ PAYWALL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.paywall { display: grid; grid-template-columns: 1fr 1fr; border-bottom: 1px solid var(--border); }
.paywall-left { padding: 100px 64px 100px 48px; border-right: 1px solid var(--border); }
.paywall-left h2 { font-family: var(--serif); font-size: clamp(2.6rem, 4vw, 4.2rem); font-weight: 300; line-height: 1.08; letter-spacing: -0.025em; margin-bottom: 22px; }
.paywall-left h2 em { font-style: italic; color: var(--gold); }
.paywall-left p { color: var(--text2); font-size: 0.92rem; line-height: 1.8; font-weight: 300; margin-bottom: 44px; max-width: 420px; }
.feature-list { list-style: none; margin-bottom: 52px; }
.feature-list li { display: flex; align-items: flex-start; gap: 14px; padding: 13px 0; border-bottom: 1px solid var(--border); font-size: 0.88rem; color: var(--text2); font-weight: 300; line-height: 1.5; }
.feature-list li::before { content: 'â†’'; color: var(--gold); font-family: var(--mono); font-size: 0.72rem; flex-shrink: 0; margin-top: 1px; }
.price-row { display: flex; align-items: baseline; gap: 14px; margin-bottom: 6px; }
.price-fig { font-family: var(--serif); font-size: 4.5rem; font-weight: 300; color: var(--gold); letter-spacing: -0.04em; line-height: 1; }
.price-meta { display: flex; flex-direction: column; gap: 3px; }
.price-meta span { font-family: var(--mono); font-size: 0.6rem; letter-spacing: 0.1em; color: var(--text3); text-transform: uppercase; }
.price-meta span.good { color: var(--green); }
.price-note { font-family: var(--mono); font-size: 0.6rem; color: var(--text3); letter-spacing: 0.08em; margin-bottom: 32px; }
.btn-buy { display: inline-flex; align-items: center; gap: 18px; background: var(--gold); color: #080809; border: none; padding: 18px 44px; font-family: var(--mono); font-size: 0.68rem; letter-spacing: 0.18em; text-transform: uppercase; cursor: pointer; font-weight: 500; transition: opacity 0.18s; }
.btn-buy:hover { opacity: 0.86; }
.btn-guarantee { margin-top: 14px; font-family: var(--mono); font-size: 0.58rem; color: var(--text3); letter-spacing: 0.07em; display: flex; align-items: center; gap: 8px; }

.paywall-right { padding: 100px 48px 100px 64px; display: flex; flex-direction: column; justify-content: center; }
.preview-card { background: var(--surface); border: 1px solid var(--border2); padding: 28px; position: relative; overflow: hidden; }
.preview-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, var(--gold), transparent); }
.preview-blur { filter: blur(5px); opacity: 0.45; pointer-events: none; user-select: none; }
.fake-scores { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 18px; }
.fake-score-card { background: var(--surface2); border: 1px solid var(--border); padding: 14px; }
.fake-score-lbl { font-family: var(--mono); font-size: 0.52rem; letter-spacing: 0.14em; color: var(--text3); text-transform: uppercase; margin-bottom: 8px; }
.fake-score-val { font-family: var(--serif); font-size: 1.8rem; font-weight: 300; letter-spacing: -0.02em; }
.fake-chart-area { height: 150px; position: relative; background: var(--surface2); border: 1px solid var(--border); padding: 12px; margin-bottom: 18px; }
.fake-stat-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.fake-stat { background: var(--surface2); border: 1px solid var(--border); padding: 12px; }
.fake-stat-lbl { font-family: var(--mono); font-size: 0.5rem; letter-spacing: 0.12em; color: var(--text3); text-transform: uppercase; margin-bottom: 6px; }
.fake-stat-val { font-family: var(--mono); font-size: 1rem; font-weight: 500; }
.preview-lock { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 12px; background: radial-gradient(ellipse at center, rgba(8,8,9,0.82) 0%, rgba(8,8,9,0.5) 100%); }
.lock-title { font-family: var(--serif); font-size: 1.6rem; font-weight: 300; letter-spacing: 0.04em; }
.lock-sub { font-family: var(--mono); font-size: 0.58rem; letter-spacing: 0.16em; color: var(--text3); text-transform: uppercase; }
.btn-lock { margin-top: 8px; background: var(--gold); color: #080809; border: none; padding: 12px 28px; font-family: var(--mono); font-size: 0.62rem; letter-spacing: 0.16em; text-transform: uppercase; cursor: pointer; font-weight: 500; transition: opacity 0.18s; }
.btn-lock:hover { opacity: 0.84; }

/* â”€â”€ APP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.app-section { display: none; padding: 80px 48px; }
.app-section.unlocked { display: block; animation: fadeIn 0.5s ease; }
.app-header { margin-bottom: 48px; }
.app-header-tag { font-family: var(--mono); font-size: 0.55rem; letter-spacing: 0.22em; color: var(--gold); text-transform: uppercase; margin-bottom: 10px; }
.app-header h2 { font-family: var(--serif); font-size: 2.8rem; font-weight: 300; letter-spacing: -0.025em; }

.score-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; margin-bottom: 2px; }
.score-card { background: var(--surface); border: 1px solid var(--border); padding: 28px 32px; position: relative; overflow: hidden; }
.score-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: var(--gold); transform: scaleX(0); transform-origin: left; transition: transform 1s cubic-bezier(0.16,1,0.3,1); }
.score-card.lit::before { transform: scaleX(1); }
.sc-tag { font-family: var(--mono); font-size: 0.52rem; letter-spacing: 0.22em; color: var(--text3); text-transform: uppercase; margin-bottom: 14px; }
.sc-val { font-family: var(--serif); font-size: 3.4rem; font-weight: 300; letter-spacing: -0.03em; line-height: 1; transition: color 0.4s; }
.sc-sub { font-family: var(--mono); font-size: 0.58rem; color: var(--text3); margin-top: 10px; letter-spacing: 0.04em; line-height: 1.5; }
.sc-bar { height: 1px; background: var(--border); margin-top: 18px; overflow: hidden; }
.sc-bar-fill { height: 100%; transition: width 1.2s cubic-bezier(0.16,1,0.3,1); }

.app-grid { display: grid; grid-template-columns: 380px 1fr; gap: 2px; margin-bottom: 2px; }

/* Inputs */
.inputs-panel { background: var(--surface); border: 1px solid var(--border); padding: 32px; }
.panel-tag { font-family: var(--mono); font-size: 0.52rem; letter-spacing: 0.22em; color: var(--text3); text-transform: uppercase; padding-bottom: 18px; border-bottom: 1px solid var(--border); margin-bottom: 26px; }
.field-group { margin-bottom: 20px; }
.field-label { font-size: 0.78rem; color: var(--text2); font-weight: 300; margin-bottom: 7px; display: block; }
.field-row { display: flex; align-items: center; }
.field-prefix { font-family: var(--mono); font-size: 0.75rem; color: var(--text3); background: var(--surface3); border: 1px solid var(--border2); border-right: none; padding: 9px 10px; height: 38px; display: flex; align-items: center; flex-shrink: 0; }
.field-suffix { font-family: var(--mono); font-size: 0.75rem; color: var(--text3); background: var(--surface3); border: 1px solid var(--border2); border-left: none; padding: 9px 10px; height: 38px; display: flex; align-items: center; flex-shrink: 0; }
input[type="number"] { width: 100%; background: var(--surface2); border: 1px solid var(--border2); color: var(--text); padding: 9px 12px; font-family: var(--mono); font-size: 0.82rem; outline: none; height: 38px; transition: border-color 0.2s; -moz-appearance: textfield; }
input[type="number"]:focus { border-color: var(--gold); }
input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; }
.field-hint { font-family: var(--mono); font-size: 0.56rem; color: var(--text3); margin-top: 5px; letter-spacing: 0.05em; }
.divider { border: none; border-top: 1px solid var(--border); margin: 22px 0; }
.select-field { width: 100%; background: var(--surface2); border: 1px solid var(--border2); color: var(--text); padding: 9px 12px; font-family: var(--mono); font-size: 0.78rem; outline: none; cursor: pointer; appearance: none; height: 38px; }
.run-btn { width: 100%; background: var(--gold); color: #080809; border: none; padding: 15px; font-family: var(--mono); font-size: 0.64rem; letter-spacing: 0.2em; text-transform: uppercase; cursor: pointer; font-weight: 500; margin-top: 10px; transition: opacity 0.18s; display: flex; align-items: center; justify-content: center; gap: 10px; }
.run-btn:hover { opacity: 0.87; }
.run-btn:disabled { opacity: 0.45; cursor: not-allowed; }

/* Chart */
.chart-panel { background: var(--surface); border: 1px solid var(--border); padding: 32px; display: flex; flex-direction: column; }
.chart-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
.chart-tabs { display: flex; gap: 2px; }
.tab-btn { font-family: var(--mono); font-size: 0.56rem; letter-spacing: 0.12em; text-transform: uppercase; padding: 8px 16px; background: transparent; border: 1px solid var(--border); color: var(--text3); cursor: pointer; transition: all 0.2s; }
.tab-btn:hover { color: var(--text2); border-color: var(--border2); }
.tab-btn.active { background: var(--gold); color: #080809; border-color: var(--gold); }
.chart-legend { display: flex; gap: 20px; }
.legend-item { display: flex; align-items: center; gap: 7px; }
.legend-line { width: 20px; height: 2px; border-radius: 1px; }
.legend-label { font-family: var(--mono); font-size: 0.56rem; color: var(--text3); letter-spacing: 0.08em; }
.chart-wrap { flex: 1; position: relative; min-height: 320px; }
canvas { width: 100% !important; height: 100% !important; }

/* Stats */
.stats-strip { display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px; margin-bottom: 2px; }
.stat-tile { background: var(--surface); border: 1px solid var(--border); padding: 20px 24px; }
.stat-tile-label { font-family: var(--mono); font-size: 0.52rem; letter-spacing: 0.16em; color: var(--text3); text-transform: uppercase; margin-bottom: 10px; }
.stat-tile-val { font-family: var(--mono); font-size: 1.25rem; font-weight: 500; }

/* Scenarios */
.scenarios-panel { background: var(--surface); border: 1px solid var(--border); padding: 32px; margin-bottom: 2px; }
.scenarios-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 20px; }
.scenario-card { background: var(--surface2); border: 1px solid var(--border); padding: 18px; cursor: pointer; text-align: left; transition: border-color 0.2s; width: 100%; }
.scenario-card:hover { border-color: var(--gold); }
.scenario-card-name { font-family: var(--sans); font-size: 0.82rem; font-weight: 400; color: var(--text); margin-bottom: 5px; }
.scenario-card-desc { font-family: var(--mono); font-size: 0.58rem; color: var(--text3); line-height: 1.55; }

/* Footer */
.footer { border-top: 1px solid var(--border); padding: 28px 48px; display: flex; align-items: center; justify-content: space-between; }
.footer span { font-family: var(--mono); font-size: 0.58rem; letter-spacing: 0.1em; color: var(--text3); }

/* Modal */
.modal-overlay { position: fixed; inset: 0; background: rgba(4,4,5,0.92); z-index: 500; display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.28s; backdrop-filter: blur(10px); }
.modal-overlay.open { opacity: 1; pointer-events: all; }
.modal { background: var(--surface); border: 1px solid var(--border2); padding: 52px; width: 510px; max-width: 94vw; max-height: 90vh; overflow-y: auto; transform: translateY(20px); transition: transform 0.36s cubic-bezier(0.16,1,0.3,1); position: relative; }
.modal::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, var(--gold), transparent); }
.modal-overlay.open .modal { transform: translateY(0); }
.modal-close { position: absolute; top: 20px; right: 24px; background: none; border: none; color: var(--text3); font-family: var(--mono); font-size: 0.58rem; letter-spacing: 0.1em; cursor: pointer; text-transform: uppercase; }
.modal-close:hover { color: var(--text); }
.modal-tag { font-family: var(--mono); font-size: 0.58rem; letter-spacing: 0.2em; color: var(--gold); text-transform: uppercase; margin-bottom: 14px; }
.modal h2 { font-family: var(--serif); font-size: 2.6rem; font-weight: 300; letter-spacing: -0.02em; line-height: 1.05; margin-bottom: 8px; }
.modal-price { font-family: var(--mono); font-size: 0.68rem; color: var(--gold); margin-bottom: 30px; letter-spacing: 0.08em; }
.modal-features { list-style: none; margin-bottom: 36px; }
.modal-features li { font-size: 0.86rem; color: var(--text2); padding: 11px 0; border-bottom: 1px solid var(--border); display: flex; gap: 12px; font-weight: 300; line-height: 1.5; }
.modal-features li::before { content: 'âœ¦'; color: var(--gold); font-size: 0.65rem; flex-shrink: 0; margin-top: 2px; }
.modal-guarantee { margin-top: 14px; font-family: var(--mono); font-size: 0.58rem; color: var(--text3); letter-spacing: 0.06em; text-align: center; }

@keyframes rise { from { opacity: 0; transform: translateY(22px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.reveal { opacity: 0; transform: translateY(18px); transition: opacity 0.65s ease, transform 0.65s ease; }
.reveal.visible { opacity: 1; transform: translateY(0); }

@media (max-width: 960px) {
  .header { padding: 16px 24px; }
  .hero { padding: 100px 24px 64px; }
  .hero-foot { flex-direction: column; gap: 32px; }
  .ticker { padding: 14px 24px; }
  .paywall { grid-template-columns: 1fr; }
  .paywall-left { padding: 72px 24px; border-right: none; border-bottom: 1px solid var(--border); }
  .paywall-right { padding: 60px 24px; }
  .app-section { padding: 48px 24px; }
  .score-grid { grid-template-columns: 1fr; }
  .app-grid { grid-template-columns: 1fr; }
  .stats-strip { grid-template-columns: 1fr 1fr; }
  .scenarios-grid { grid-template-columns: 1fr 1fr; }
  .footer { flex-direction: column; gap: 10px; padding: 24px; text-align: center; }
  .modal { padding: 36px 28px; }
}
</style>
</head>
<body>

<header class="header">
  <div class="logo">
    <div class="logo-rule"></div>
    <div class="logo-name">Ignite</div>
  </div>
  <div class="header-right">
    <a href="#pricing" class="nav-link">Pricing</a>
    <button class="btn-cta" onclick="openModal()">Get Access â€” $39</button>
  </div>
</header>

<section class="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid"></div>
  <div class="hero-tag">Monte Carlo Retirement Engine</div>
  <h1 class="hero-h1">Will your<br>money <em>last?</em></h1>
  <div class="hero-foot">
    <p class="hero-desc">10,000 retirement simulations in under three seconds. One probability score tells you everything. Built for the FIRE community â€” by people who take financial independence seriously.</p>
    <div class="hero-kpis">
      <div><div class="kpi-num">10K</div><div class="kpi-label">Simulations per run</div></div>
      <div><div class="kpi-num">&lt;3s</div><div class="kpi-label">Time to result</div></div>
      <div><div class="kpi-num">$39</div><div class="kpi-label">One-time. Forever.</div></div>
    </div>
  </div>
</section>

<div class="ticker">
  <div class="ticker-item"><div class="ticker-dot"></div>Monte Carlo Simulation</div>
  <div class="ticker-item"><div class="ticker-dot"></div>Safe Withdrawal Rate Analysis</div>
  <div class="ticker-item"><div class="ticker-dot"></div>Coast FIRE Calculator</div>
  <div class="ticker-item"><div class="ticker-dot"></div>Sequence of Returns Risk</div>
  <div class="ticker-item"><div class="ticker-dot"></div>Withdrawal Ladder Modeling</div>
  <div class="ticker-item"><div class="ticker-dot"></div>No Subscription. Ever.</div>
</div>

<section class="paywall" id="pricing">
  <div class="paywall-left reveal">
    <h2>The only number<br>that <em>actually matters</em></h2>
    <p>Your FIRE Probability Score. How likely is your money to survive 40+ years across 10,000 simulated market scenarios â€” including crashes, inflation shocks, and lost decades.</p>
    <ul class="feature-list">
      <li>Full Monte Carlo with 10,000 retirement path simulations</li>
      <li>FIRE date calculator at your current savings trajectory</li>
      <li>Coast FIRE number â€” the point where you can stop contributing</li>
      <li>Stress test across base, conservative, and bull market conditions</li>
      <li>Withdrawal ladder with full inflation adjustment modeling</li>
      <li>P10 / Median / P90 percentile path visualization</li>
      <li>No artificial input limits â€” model any portfolio size</li>
    </ul>
    <div class="price-row">
      <div class="price-fig">$39</div>
      <div class="price-meta">
        <span>One-time payment</span>
        <span class="good">Lifetime access</span>
      </div>
    </div>
    <div class="price-note">No subscription. No renewal. No account required.</div>
    <button class="btn-buy" onclick="openModal()"><span>Unlock Full Access</span><span>â†’</span></button>
    <div class="btn-guarantee"><span style="color:var(--gold)">â—</span> 30-day money-back guarantee Â· Instant access Â· Secure checkout</div>
  </div>

  <div class="paywall-right reveal">
    <div class="preview-card">
      <div class="preview-blur">
        <div class="fake-scores">
          <div class="fake-score-card"><div class="fake-score-lbl">FIRE Probability</div><div class="fake-score-val" style="color:var(--green)">87.3%</div></div>
          <div class="fake-score-card"><div class="fake-score-lbl">FIRE Age</div><div class="fake-score-val" style="color:var(--gold)">48</div></div>
          <div class="fake-score-card"><div class="fake-score-lbl">Coast FIRE</div><div class="fake-score-val">$312K</div></div>
        </div>
        <div class="fake-chart-area">
          <svg width="100%" height="100%" viewBox="0 0 400 126" preserveAspectRatio="none">
            <line x1="0" y1="32" x2="400" y2="32" stroke="#1e1e24" stroke-width="1"/>
            <line x1="0" y1="64" x2="400" y2="64" stroke="#1e1e24" stroke-width="1"/>
            <line x1="0" y1="96" x2="400" y2="96" stroke="#1e1e24" stroke-width="1"/>
            <path d="M0,98 C60,88 120,54 180,44 C240,34 300,14 400,8" stroke="#3a9068" stroke-width="1.5" fill="none" opacity="0.7"/>
            <path d="M0,105 C60,100 120,72 180,62 C240,52 300,34 400,28" stroke="#c8a84b" stroke-width="2" fill="none"/>
            <path d="M0,112 C60,110 120,104 180,108 C240,112 300,98 400,104" stroke="#b83232" stroke-width="1.5" fill="none" opacity="0.7"/>
          </svg>
        </div>
        <div class="fake-stat-row">
          <div class="fake-stat"><div class="fake-stat-lbl">Median End</div><div class="fake-stat-val" style="color:var(--gold)">$2.4M</div></div>
          <div class="fake-stat"><div class="fake-stat-lbl">Worst 10%</div><div class="fake-stat-val" style="color:var(--red)">$0</div></div>
          <div class="fake-stat"><div class="fake-stat-lbl">Best 90%</div><div class="fake-stat-val" style="color:var(--green)">$6.1M</div></div>
        </div>
      </div>
      <div class="preview-lock">
        <div style="font-size:1.6rem">ğŸ”’</div>
        <div class="lock-title">Full Access â€” $39</div>
        <div class="lock-sub">One-time Â· Lifetime Â· Instant</div>
        <button class="btn-lock" onclick="openModal()">Unlock Now â†’</button>
      </div>
    </div>
  </div>
</section>

<section class="app-section" id="appSection">
  <div class="app-header">
    <div class="app-header-tag">// Full Access Unlocked</div>
    <h2>Your FIRE Simulator</h2>
  </div>

  <div class="score-grid">
    <div class="score-card" id="probCard">
      <div class="sc-tag">FIRE Probability</div>
      <div class="sc-val" id="probScore" style="color:var(--text3)">â€”</div>
      <div class="sc-sub" id="probSub">Run simulation to calculate</div>
      <div class="sc-bar"><div class="sc-bar-fill" id="probBar" style="width:0%;background:var(--gold)"></div></div>
    </div>
    <div class="score-card">
      <div class="sc-tag">FIRE Age</div>
      <div class="sc-val" id="fireAge" style="color:var(--text3)">â€”</div>
      <div class="sc-sub" id="fireAgeSub">At current savings rate</div>
    </div>
    <div class="score-card">
      <div class="sc-tag">Coast FIRE Number</div>
      <div class="sc-val" id="coastNum" style="font-size:2.2rem;color:var(--text3)">â€”</div>
      <div class="sc-sub" id="coastSub">Amount needed to coast</div>
    </div>
  </div>

  <div class="app-grid">
    <div class="inputs-panel">
      <div class="panel-tag">// Portfolio Parameters</div>

      <div class="field-group">
        <label class="field-label">Current Portfolio Value</label>
        <div class="field-row"><div class="field-prefix">$</div><input type="number" id="portfolio" value="500000" min="0" step="1000" placeholder="500000"></div>
        <div class="field-hint">Enter any amount â€” no upper limit</div>
      </div>

      <div class="field-group">
        <label class="field-label">Annual Spending in Retirement</label>
        <div class="field-row"><div class="field-prefix">$</div><input type="number" id="spending" value="40000" min="0" step="500" placeholder="40000"></div>
        <div class="field-hint">Your expected yearly expenses post-FIRE</div>
      </div>

      <div class="field-group">
        <label class="field-label">Annual Savings (Current)</label>
        <div class="field-row"><div class="field-prefix">$</div><input type="number" id="savings" value="30000" min="0" step="500" placeholder="30000"></div>
        <div class="field-hint">How much you save per year right now</div>
      </div>

      <div class="field-group">
        <label class="field-label">Current Age</label>
        <input type="number" id="currentAge" value="35" min="18" max="99" step="1" placeholder="35" style="width:100%">
      </div>

      <div class="field-group">
        <label class="field-label">Target Retirement Age</label>
        <input type="number" id="retireAge" value="50" min="18" max="99" step="1" placeholder="50" style="width:100%">
      </div>

      <div class="divider"></div>
      <div class="panel-tag">// Market Assumptions</div>

      <div class="field-group">
        <label class="field-label">Expected Annual Return</label>
        <div class="field-row"><input type="number" id="returnRate" value="7.0" min="0" step="0.1" placeholder="7.0"><div class="field-suffix">%</div></div>
        <div class="field-hint">Historical US equity average ~7% real</div>
      </div>

      <div class="field-group">
        <label class="field-label">Safe Withdrawal Rate</label>
        <div class="field-row"><input type="number" id="swr" value="4.0" min="0.1" step="0.1" placeholder="4.0"><div class="field-suffix">%</div></div>
        <div class="field-hint">Classic 4% rule â€” adjust for your risk</div>
      </div>

      <div class="field-group">
        <label class="field-label">Inflation Rate</label>
        <div class="field-row"><input type="number" id="inflation" value="3.0" min="0" step="0.1" placeholder="3.0"><div class="field-suffix">%</div></div>
        <div class="field-hint">US long-run average ~3%</div>
      </div>

      <div class="field-group">
        <label class="field-label">Retirement Duration</label>
        <select class="select-field" id="duration">
          <option value="30">30 years</option>
          <option value="40" selected>40 years</option>
          <option value="50">50 years</option>
          <option value="60">60 years</option>
        </select>
      </div>

      <button class="run-btn" id="runBtn" onclick="runSim()">
        <span id="runBtnText">â–¶ Run 10,000 Simulations</span>
      </button>
    </div>

    <div class="chart-panel">
      <div class="chart-top">
        <div class="chart-tabs">
          <button class="tab-btn active" onclick="switchTab('mc',this)">Monte Carlo Paths</button>
          <button class="tab-btn" onclick="switchTab('dist',this)">Distribution</button>
          <button class="tab-btn" onclick="switchTab('ladder',this)">Withdrawal Ladder</button>
        </div>
        <div class="chart-legend" id="chartLegend">
          <div class="legend-item"><div class="legend-line" style="background:#3a9068"></div><span class="legend-label">P90 Best</span></div>
          <div class="legend-item"><div class="legend-line" style="background:#c8a84b"></div><span class="legend-label">Median</span></div>
          <div class="legend-item"><div class="legend-line" style="background:#b83232"></div><span class="legend-label">P10 Worst</span></div>
        </div>
      </div>
      <div class="chart-wrap">
        <canvas id="mainChart"></canvas>
      </div>
    </div>
  </div>

  <div class="stats-strip">
    <div class="stat-tile"><div class="stat-tile-label">Median Portfolio at End</div><div class="stat-tile-val" id="statMedian" style="color:var(--gold)">â€”</div></div>
    <div class="stat-tile"><div class="stat-tile-label">Worst 10th Percentile</div><div class="stat-tile-val" id="statWorst" style="color:var(--red)">â€”</div></div>
    <div class="stat-tile"><div class="stat-tile-label">Best 90th Percentile</div><div class="stat-tile-val" id="statBest" style="color:var(--green)">â€”</div></div>
    <div class="stat-tile"><div class="stat-tile-label">Required FIRE Number</div><div class="stat-tile-val" id="statFire">â€”</div></div>
  </div>

  <div class="scenarios-panel">
    <div class="panel-tag">// Quick Scenarios â€” click to apply</div>
    <div class="scenarios-grid">
      <button class="scenario-card" onclick="applyScenario('base')">
        <div class="scenario-card-name">Base Case</div>
        <div class="scenario-card-desc">7.0% return Â· 3.0% inflation Â· Historical US average</div>
      </button>
      <button class="scenario-card" onclick="applyScenario('conservative')">
        <div class="scenario-card-name">Conservative</div>
        <div class="scenario-card-desc">5.0% return Â· 3.5% inflation Â· Lower-return decade</div>
      </button>
      <button class="scenario-card" onclick="applyScenario('bull')">
        <div class="scenario-card-name">Bull Market</div>
        <div class="scenario-card-desc">9.0% return Â· 2.5% inflation Â· Strong equity run</div>
      </button>
    </div>
  </div>
</section>

<footer class="footer">
  <span>Â© 2025 IGNITE â€” FIRE Probability Engine</span>
  <span>Built for the FIRE community Â· One-time purchase Â· No tracking</span>
</footer>

<div class="modal-overlay" id="modalOverlay" onclick="closeOutside(event)">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">âœ• Close</button>
    <div class="modal-tag">One-time purchase Â· Lifetime access</div>
    <h2>Unlock<br>IGNITE</h2>
    <div class="modal-price">$39 Â· Pay once Â· Use forever Â· 30-day guarantee</div>
    <ul class="modal-features">
      <li>10,000 Monte Carlo retirement path simulations</li>
      <li>FIRE Probability Score â€” one number, complete clarity</li>
      <li>FIRE date calculator at your current savings rate</li>
      <li>Coast FIRE number â€” when you can stop contributing</li>
      <li>Safe Withdrawal Rate sensitivity testing</li>
      <li>Withdrawal ladder with full inflation adjustment</li>
      <li>Base, Conservative, and Bull market scenario presets</li>
      <li>No artificial input limits â€” model any figure</li>
      <li>No account. No subscription. No renewal.</li>
    </ul>
    <button class="btn-buy" style="width:100%;justify-content:center;" onclick="handlePurchase()">Pay $39 â€” Get Instant Access â†’</button>
    <div class="modal-guarantee">30-day money-back guarantee Â· Secure payment Â· Instant unlock</div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<script>
// Scroll reveals
const revObs = new IntersectionObserver(entries => {
  entries.forEach((e,i) => { if(e.isIntersecting) setTimeout(()=>e.target.classList.add('visible'), i*100); });
}, {threshold:0.08});
document.querySelectorAll('.reveal').forEach(el => revObs.observe(el));

// Paywall â€” set DEMO_MODE=true to bypass for your own testing
const DEMO_MODE = false;
let unlocked = DEMO_MODE || localStorage.getItem('ignite_unlocked')==='true';
if(unlocked) showApp();

function handlePurchase() {
  // REPLACE with your Lemon Squeezy URL:
  const CHECKOUT = 'https://YOUR_STORE.lemonsqueezy.com/buy/YOUR_PRODUCT_ID';
  window.location.href = CHECKOUT;
  // To test without paying, comment out the two lines above and uncomment these:
  // unlocked=true; localStorage.setItem('ignite_unlocked','true');
  // closeModal(); showApp(); document.getElementById('appSection').scrollIntoView({behavior:'smooth'});
}

function showApp() {
  document.getElementById('appSection').classList.add('unlocked');
  setTimeout(runSim, 400);
}

function openModal() {
  if(unlocked){ document.getElementById('appSection').scrollIntoView({behavior:'smooth'}); return; }
  document.getElementById('modalOverlay').classList.add('open');
  document.body.style.overflow='hidden';
}
function closeModal() { document.getElementById('modalOverlay').classList.remove('open'); document.body.style.overflow=''; }
function closeOutside(e) { if(e.target.id==='modalOverlay') closeModal(); }

function fmt(n) {
  if(n===null||isNaN(n)) return 'â€”';
  const a=Math.abs(n);
  if(a>=1e9) return '$'+(n/1e9).toFixed(2)+'B';
  if(a>=1e6) return '$'+(n/1e6).toFixed(2)+'M';
  if(a>=1e3) return '$'+(n/1e3).toFixed(0)+'K';
  return '$'+Math.round(n).toLocaleString();
}

function getVal(id) { return parseFloat(document.getElementById(id).value)||0; }

function getParams() {
  return {
    portfolio:  getVal('portfolio'),
    spending:   getVal('spending'),
    savings:    getVal('savings'),
    currentAge: getVal('currentAge'),
    retireAge:  getVal('retireAge'),
    returnRate: getVal('returnRate')/100,
    swr:        getVal('swr')/100,
    inflation:  getVal('inflation')/100,
    duration:   getVal('duration'),
  };
}

function randNorm(mean,std) {
  let u=0,v=0;
  while(!u) u=Math.random();
  while(!v) v=Math.random();
  return mean+std*Math.sqrt(-2*Math.log(u))*Math.cos(2*Math.PI*v);
}

function simulate(p,n=10000) {
  const {portfolio,spending,savings,currentAge,retireAge,returnRate,inflation,duration}=p;
  const accumYrs=Math.max(0,retireAge-currentAge);
  const vol=0.155;
  let ok=0;
  const finals=[],paths=[];
  for(let i=0;i<n;i++){
    let bal=portfolio;
    for(let y=0;y<accumYrs;y++) bal=bal*(1+randNorm(returnRate,vol))+savings;
    const path=[Math.max(bal,0)];
    let died=false;
    for(let y=0;y<duration;y++){
      bal=bal*(1+randNorm(returnRate-0.004,vol))-spending*Math.pow(1+inflation,y);
      path.push(Math.max(bal,0));
      if(bal<=0&&!died) died=true;
    }
    if(!died) ok++;
    finals.push(bal);
    paths.push(path);
  }
  const sorted=[...paths].sort((a,b)=>(b[b.length-1]||0)-(a[a.length-1]||0));
  finals.sort((a,b)=>a-b);
  return {
    probability:(ok/n)*100,
    p90:sorted[Math.floor(n*0.1)],
    p50:sorted[Math.floor(n*0.5)],
    p10:sorted[Math.floor(n*0.9)],
    median:finals[Math.floor(n*0.5)],
    worst10:Math.max(finals[Math.floor(n*0.1)],0),
    best90:finals[Math.floor(n*0.9)],
    finals,
  };
}

function calcFire(p) {
  const num=p.spending/Math.max(p.swr,0.001);
  let bal=p.portfolio,yrs=0;
  while(bal<num&&yrs<80){bal=bal*1.07+p.savings;yrs++;}
  return {num,age:Math.round(p.currentAge+yrs),yrs};
}

function calcCoast(p) {
  const num=p.spending/Math.max(p.swr,0.001);
  return num/Math.pow(1.07,Math.max(1,p.retireAge-p.currentAge));
}

let chart=null, activeTab='mc', lastR=null, lastP=null;

function switchTab(tab,el) {
  activeTab=tab;
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('chartLegend').style.display=tab==='mc'?'flex':'none';
  if(lastR) renderChart(lastR,lastP);
}

function renderChart(r,p) {
  const ctx=document.getElementById('mainChart').getContext('2d');
  if(chart){chart.destroy();chart=null;}
  const dur=p.duration;
  const labels=Array.from({length:dur+1},(_,i)=>p.retireAge+i);

  const scaleX={
    grid:{color:'rgba(255,255,255,0.04)',drawBorder:false},
    border:{color:'#28282f',width:1},
    ticks:{color:'#46464e',font:{family:'DM Mono',size:9},maxTicksLimit:10,padding:8},
    title:{display:true,text:'Age',color:'#46464e',font:{family:'DM Mono',size:9},padding:{top:8}}
  };
  const scaleYMoney={
    grid:{color:'rgba(255,255,255,0.05)',drawBorder:false},
    border:{color:'#28282f',width:1},
    ticks:{color:'#46464e',font:{family:'DM Mono',size:9},padding:10,
      callback:v=>v>=1?'$'+v.toFixed(1)+'M':v>=0.001?'$'+(v*1000).toFixed(0)+'K':'$0'},
    title:{display:true,text:'Portfolio Value ($M)',color:'#46464e',font:{family:'DM Mono',size:9},padding:{bottom:8}}
  };
  const tooltip={
    backgroundColor:'#141416',borderColor:'#28282f',borderWidth:1,
    titleColor:'#c8a84b',bodyColor:'#888890',cornerRadius:0,padding:10,
    titleFont:{family:'DM Mono',size:9},bodyFont:{family:'DM Mono',size:9}
  };

  if(activeTab==='mc'){
    const toM=arr=>arr?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[];
    chart=new Chart(ctx,{
      type:'line',
      data:{labels,datasets:[
        {label:'P90 (Best)',data:toM(r.p90),borderColor:'#3a9068',borderWidth:1.5,pointRadius:0,fill:false,tension:0.35},
        {label:'Median',data:toM(r.p50),borderColor:'#c8a84b',borderWidth:2.5,pointRadius:0,fill:false,tension:0.35},
        {label:'P10 (Worst)',data:toM(r.p10),borderColor:'#b83232',borderWidth:1.5,pointRadius:0,fill:false,tension:0.35},
      ]},
      options:{
        responsive:true,maintainAspectRatio:false,
        animation:{duration:800,easing:'easeOutQuart'},
        plugins:{legend:{display:false},tooltip:{...tooltip,callbacks:{
          title:items=>'Age '+items[0].label,
          label:item=>' '+item.dataset.label+': $'+item.parsed.y.toFixed(2)+'M'
        }}},
        scales:{x:scaleX,y:scaleYMoney}
      }
    });
  } else if(activeTab==='dist'){
    const vals=r.finals.map(v=>v/1e6);
    const cap=Math.min(Math.max(...vals.filter(v=>isFinite(v))),25);
    const floor=Math.min(...vals.filter(v=>isFinite(v)));
    const bins=50,bw=(cap-floor)/bins;
    const counts=new Array(bins).fill(0);
    vals.forEach(v=>{if(!isFinite(v))return;const idx=Math.min(Math.floor((Math.min(v,cap)-floor)/bw),bins-1);if(idx>=0)counts[idx]++;});
    chart=new Chart(ctx,{
      type:'bar',
      data:{labels:counts.map((_,i)=>(floor+(i+0.5)*bw).toFixed(1)),datasets:[{
        label:'Simulations',data:counts,borderWidth:0,borderRadius:1,
        backgroundColor:counts.map((_,i)=>floor+i*bw<=0?'rgba(184,50,50,0.55)':'rgba(200,168,75,0.42)')
      }]},
      options:{
        responsive:true,maintainAspectRatio:false,
        animation:{duration:700,easing:'easeOutQuart'},
        plugins:{legend:{display:false},tooltip:{...tooltip,callbacks:{
          title:items=>'$'+items[0].label+'M',
          label:item=>' '+item.parsed.y.toLocaleString()+' simulations'
        }}},
        scales:{
          x:{...scaleX,title:{display:true,text:'Final Portfolio Value ($M)',color:'#46464e',font:{family:'DM Mono',size:9}},
            ticks:{...scaleX.ticks,callback:(_,i)=>{const v=floor+i*bw;return v>=1?'$'+v.toFixed(0)+'M':'$'+Math.round(v*1000)+'K';}}},
          y:{...scaleYMoney,ticks:{...scaleYMoney.ticks,callback:v=>v.toLocaleString()},
            title:{display:true,text:'Number of Simulations',color:'#46464e',font:{family:'DM Mono',size:9}}}
        }
      }
    });
  } else {
    const yrs=Array.from({length:dur},(_,i)=>i+1);
    chart=new Chart(ctx,{
      type:'bar',
      data:{labels:yrs.map(y=>p.retireAge+y),datasets:[
        {label:'Nominal withdrawal ($K)',data:yrs.map(y=>+(p.spending*Math.pow(1+p.inflation,y)/1000).toFixed(1)),backgroundColor:'rgba(200,168,75,0.45)',borderWidth:0,borderRadius:1},
        {label:'Real purchasing power ($K)',data:yrs.map(()=>+(p.spending/1000).toFixed(1)),backgroundColor:'rgba(58,144,104,0.35)',borderWidth:0,borderRadius:1},
      ]},
      options:{
        responsive:true,maintainAspectRatio:false,
        animation:{duration:700,easing:'easeOutQuart'},
        plugins:{legend:{display:true,labels:{color:'#888890',font:{family:'DM Mono',size:9},boxWidth:12,boxHeight:2,padding:16}},
          tooltip:{...tooltip,callbacks:{title:items=>'Age '+items[0].label,label:item=>' '+item.dataset.label+': $'+item.parsed.y.toFixed(1)+'K'}}},
        scales:{
          x:{...scaleX,title:{display:true,text:'Age',color:'#46464e',font:{family:'DM Mono',size:9}}},
          y:{...scaleYMoney,ticks:{...scaleYMoney.ticks,callback:v=>'$'+v+'K'},
            title:{display:true,text:'Annual Withdrawal ($K)',color:'#46464e',font:{family:'DM Mono',size:9}}}
        }
      }
    });
  }
}

function runSim() {
  const btn=document.getElementById('runBtn');
  const txt=document.getElementById('runBtnText');
  btn.disabled=true; txt.textContent='âŸ³  Simulating 10,000 pathsâ€¦';
  setTimeout(()=>{
    const p=getParams();
    if(!p.spending||!p.swr){btn.disabled=false;txt.textContent='â–¶ Run 10,000 Simulations';return;}
    const r=simulate(p);
    const fi=calcFire(p);
    const coast=calcCoast(p);
    lastR=r;lastP=p;

    const prob=r.probability;
    const pEl=document.getElementById('probScore');
    pEl.textContent=prob.toFixed(1)+'%';
    pEl.style.color=prob>=85?'var(--green)':prob>=65?'var(--gold)':'var(--red)';
    document.getElementById('probSub').textContent=prob>=85?'High confidence â€” your plan holds up':prob>=65?'Moderate confidence â€” review assumptions':'High failure risk â€” revise your plan';
    document.getElementById('probBar').style.width=prob+'%';
    document.getElementById('probBar').style.background=prob>=85?'var(--green)':prob>=65?'var(--gold)':'var(--red)';
    document.getElementById('probCard').classList.add('lit');

    const fEl=document.getElementById('fireAge');
    fEl.textContent=fi.age<=p.currentAge+80?fi.age:'80+';
    fEl.style.color=fi.age<=p.retireAge?'var(--green)':'var(--gold)';
    document.getElementById('fireAgeSub').textContent=fi.age<=p.retireAge?fi.yrs+' years away â€” on target âœ“':fi.yrs+' years away â€” '+(fi.age-p.retireAge)+'yr past target';

    const cEl=document.getElementById('coastNum');
    cEl.textContent=fmt(coast);
    cEl.style.color=p.portfolio>=coast?'var(--green)':'var(--text2)';
    document.getElementById('coastSub').textContent=p.portfolio>=coast?'âœ“ You have reached Coast FIRE':fmt(coast-p.portfolio)+' more to reach Coast FIRE';

    document.getElementById('statMedian').textContent=fmt(r.median);
    document.getElementById('statWorst').textContent=fmt(r.worst10);
    document.getElementById('statBest').textContent=fmt(r.best90);
    document.getElementById('statFire').textContent=fmt(fi.num);

    renderChart(r,p);
    btn.disabled=false;txt.textContent='â–¶ Run 10,000 Simulations';
  },60);
}

function applyScenario(name) {
  const s={base:{r:7,i:3},conservative:{r:5,i:3.5},bull:{r:9,i:2.5}}[name];
  document.getElementById('returnRate').value=s.r;
  document.getElementById('inflation').value=s.i;
  runSim();
}
</script>
</body>
</html>body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  min-height: 100vh;
  overflow-x: hidden;
  cursor: crosshair;
}

/* Custom cursor */
.cursor {
  width: 6px; height: 6px;
  background: var(--gold);
  border-radius: 50%;
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  transition: transform 0.15s ease;
  mix-blend-mode: difference;
}

/* Grain */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9998;
}

/* â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.header {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 48px;
  border-bottom: 1px solid var(--border);
  background: rgba(8,8,8,0.9);
  backdrop-filter: blur(20px);
}

.logo-mark {
  display: flex;
  align-items: center;
  gap: 14px;
}

.logo-line {
  width: 32px;
  height: 1px;
  background: var(--gold);
}

.logo-text {
  font-family: var(--serif);
  font-size: 1.1rem;
  font-weight: 600;
  letter-spacing: 0.25em;
  color: var(--text);
  text-transform: uppercase;
}

.header-nav {
  display: flex;
  align-items: center;
  gap: 32px;
}

.nav-link {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  color: var(--text2);
  text-decoration: none;
  text-transform: uppercase;
  transition: color 0.2s;
}
.nav-link:hover { color: var(--gold); }

.btn-access {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 10px 24px;
  cursor: crosshair;
  font-weight: 500;
  transition: opacity 0.2s;
}
.btn-access:hover { opacity: 0.85; }

/* â”€â”€â”€ HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 0 48px 80px;
  position: relative;
  overflow: hidden;
}

.hero-bg {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 60% 50% at 70% 40%, rgba(201,168,76,0.04) 0%, transparent 70%),
    radial-gradient(ellipse 40% 60% at 20% 70%, rgba(61,153,112,0.03) 0%, transparent 60%);
}

.hero-grid {
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(var(--border) 1px, transparent 1px),
    linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 80px 80px;
  opacity: 0.3;
  mask-image: radial-gradient(ellipse 80% 80% at 50% 50%, black 20%, transparent 80%);
}

.hero-eyebrow {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.3em;
  color: var(--gold);
  text-transform: uppercase;
  margin-bottom: 24px;
  opacity: 0;
  animation: rise 0.8s 0.2s ease forwards;
  display: flex;
  align-items: center;
  gap: 16px;
}

.hero-eyebrow::before {
  content: '';
  display: block;
  width: 40px;
  height: 1px;
  background: var(--gold);
}

.hero-headline {
  font-family: var(--serif);
  font-size: clamp(4rem, 9vw, 9rem);
  font-weight: 300;
  line-height: 0.92;
  letter-spacing: -0.02em;
  color: var(--text);
  margin-bottom: 40px;
  opacity: 0;
  animation: rise 0.8s 0.35s ease forwards;
}

.hero-headline em {
  font-style: italic;
  color: var(--gold);
}

.hero-bottom {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  opacity: 0;
  animation: rise 0.8s 0.5s ease forwards;
}

.hero-desc {
  max-width: 420px;
  font-size: 0.95rem;
  color: var(--text2);
  line-height: 1.75;
  font-weight: 300;
}

.hero-stats {
  display: flex;
  gap: 48px;
}

.hero-stat-num {
  font-family: var(--serif);
  font-size: 2.8rem;
  font-weight: 300;
  color: var(--gold);
  line-height: 1;
  letter-spacing: -0.02em;
}

.hero-stat-label {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
  margin-top: 6px;
}

/* â”€â”€â”€ PROOF STRIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.proof-strip {
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  padding: 20px 48px;
  display: flex;
  align-items: center;
  gap: 48px;
  overflow: hidden;
}

.proof-item {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.1em;
  color: var(--text3);
  text-transform: uppercase;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 10px;
}

.proof-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--gold);
  flex-shrink: 0;
}

/* â”€â”€â”€ PAYWALL SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.paywall-section {
  padding: 120px 48px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 80px;
  align-items: center;
  border-bottom: 1px solid var(--border);
}

.paywall-left h2 {
  font-family: var(--serif);
  font-size: clamp(2.5rem, 4vw, 4rem);
  font-weight: 300;
  line-height: 1.1;
  letter-spacing: -0.02em;
  margin-bottom: 24px;
}

.paywall-left h2 em {
  font-style: italic;
  color: var(--gold);
}

.paywall-left p {
  color: var(--text2);
  font-size: 0.95rem;
  line-height: 1.75;
  font-weight: 300;
  margin-bottom: 40px;
  max-width: 400px;
}

.features-list {
  list-style: none;
  margin-bottom: 48px;
}

.features-list li {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 14px 0;
  border-bottom: 1px solid var(--border);
  font-size: 0.9rem;
  color: var(--text2);
  font-weight: 300;
}

.features-list li::before {
  content: 'â†’';
  color: var(--gold);
  flex-shrink: 0;
  font-family: var(--mono);
  font-size: 0.75rem;
  margin-top: 1px;
}

.price-block {
  display: flex;
  align-items: baseline;
  gap: 12px;
  margin-bottom: 8px;
}

.price-amount {
  font-family: var(--serif);
  font-size: 4rem;
  font-weight: 300;
  color: var(--gold);
  letter-spacing: -0.03em;
  line-height: 1;
}

.price-label {
  font-family: var(--mono);
  font-size: 0.65rem;
  color: var(--text3);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.price-note {
  font-family: var(--mono);
  font-size: 0.65rem;
  color: var(--text3);
  letter-spacing: 0.08em;
  margin-bottom: 32px;
}

.btn-buy {
  display: inline-flex;
  align-items: center;
  gap: 16px;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 18px 40px;
  font-family: var(--mono);
  font-size: 0.7rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  cursor: crosshair;
  font-weight: 500;
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
}

.btn-buy::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.1);
  transform: translateX(-100%);
  transition: transform 0.3s ease;
}

.btn-buy:hover::after { transform: translateX(0); }

.btn-buy-arrow { font-size: 1rem; }

.guarantee {
  margin-top: 16px;
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  letter-spacing: 0.08em;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Preview card */
.paywall-right {
  position: relative;
}

.preview-card {
  background: var(--surface);
  border: 1px solid var(--border2);
  padding: 32px;
  position: relative;
  overflow: hidden;
}

.preview-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.preview-blur {
  filter: blur(6px);
  opacity: 0.4;
  pointer-events: none;
  user-select: none;
}

.preview-lock {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  background: radial-gradient(ellipse at center, rgba(8,8,8,0.8) 0%, rgba(8,8,8,0.4) 100%);
}

.lock-icon {
  font-size: 2rem;
  filter: grayscale(1);
}

.lock-text {
  font-family: var(--serif);
  font-size: 1.4rem;
  font-weight: 300;
  color: var(--text);
  letter-spacing: 0.05em;
}

.lock-sub {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
}

/* Fake chart lines */
.fake-chart {
  height: 140px;
  position: relative;
  margin-bottom: 24px;
}

.fake-line {
  position: absolute;
  height: 1px;
  left: 0; right: 0;
  background: var(--border);
}

.fake-line-1 { top: 20%; }
.fake-line-2 { top: 50%; }
.fake-line-3 { top: 80%; }

.fake-path {
  position: absolute;
  inset: 0;
}

.fake-score-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
}

.fake-score {
  background: var(--surface2);
  border: 1px solid var(--border);
  padding: 14px;
}

.fake-score-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.12em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 8px;
}

.fake-score-val {
  font-family: var(--serif);
  font-size: 1.6rem;
  font-weight: 300;
  letter-spacing: -0.02em;
}

/* â”€â”€â”€ APP (LOCKED BY DEFAULT) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.app-section {
  display: none;
  padding: 80px 48px;
  animation: fadeIn 0.6s ease;
}

.app-section.unlocked {
  display: block;
}

/* Score cards */
.scores-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 2px;
  margin-bottom: 2px;
}

.score-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 28px 32px;
  position: relative;
  overflow: hidden;
  transition: border-color 0.3s;
}

.score-card::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: var(--gold);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 1s cubic-bezier(0.16,1,0.3,1);
}

.score-card.lit::after { transform: scaleX(1); }

.score-tag {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.2em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 16px;
}

.score-num {
  font-family: var(--serif);
  font-size: 3.2rem;
  font-weight: 300;
  letter-spacing: -0.03em;
  line-height: 1;
  transition: color 0.5s;
}

.score-sub {
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  margin-top: 10px;
  letter-spacing: 0.05em;
}

.score-bar {
  height: 2px;
  background: var(--border);
  margin-top: 16px;
  overflow: hidden;
}

.score-bar-fill {
  height: 100%;
  transition: width 1.2s cubic-bezier(0.16,1,0.3,1);
}

/* Main layout */
.app-layout {
  display: grid;
  grid-template-columns: 360px 1fr;
  gap: 2px;
  margin-bottom: 2px;
}

.inputs-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
}

.panel-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.22em;
  color: var(--text3);
  text-transform: uppercase;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 28px;
}

.input-group { margin-bottom: 22px; }

.input-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}

.input-name {
  font-size: 0.8rem;
  color: var(--text2);
  font-weight: 300;
}

.input-val {
  font-family: var(--mono);
  font-size: 0.8rem;
  color: var(--gold);
}

input[type="range"] {
  -webkit-appearance: none;
  width: 100%;
  height: 1px;
  background: var(--border2);
  outline: none;
  cursor: crosshair;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
  background: var(--gold);
  border-radius: 50%;
  cursor: crosshair;
  transition: transform 0.15s;
}

input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.4); }

.divider { border: none; border-top: 1px solid var(--border); margin: 24px 0; }

.select-field {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 10px 12px;
  font-family: var(--mono);
  font-size: 0.75rem;
  outline: none;
  cursor: crosshair;
  appearance: none;
}

.run-btn {
  width: 100%;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 16px;
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  cursor: crosshair;
  font-weight: 500;
  margin-top: 8px;
  transition: opacity 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.run-btn:hover { opacity: 0.88; }
.run-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* Chart */
.chart-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
  display: flex;
  flex-direction: column;
}

.chart-tabs {
  display: flex;
  gap: 2px;
  margin-bottom: 24px;
}

.tab-btn {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text3);
  cursor: crosshair;
  transition: all 0.2s;
}

.tab-btn.active {
  background: var(--gold);
  color: #080808;
  border-color: var(--gold);
}

canvas { width: 100% !important; flex: 1; }

/* Stats */
.stats-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 2px;
  margin-bottom: 2px;
}

.stat-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 20px 24px;
}

.stat-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 10px;
}

.stat-val {
  font-family: var(--mono);
  font-size: 1.2rem;
  font-weight: 500;
}

/* Scenarios */
.scenarios-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
  margin-bottom: 2px;
}

.scenarios-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 20px;
}

.scenario-btn {
  background: var(--surface2);
  border: 1px solid var(--border);
  padding: 18px;
  cursor: crosshair;
  text-align: left;
  transition: border-color 0.2s;
}

.scenario-btn:hover { border-color: var(--gold); }

.scenario-name {
  font-family: var(--sans);
  font-size: 0.82rem;
  font-weight: 400;
  color: var(--text);
  margin-bottom: 4px;
}

.scenario-desc {
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  line-height: 1.5;
  letter-spacing: 0.03em;
}

/* â”€â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.footer {
  border-top: 1px solid var(--border);
  padding: 32px 48px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.footer-left {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  color: var(--text3);
}

.footer-right {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  color: var(--text3);
}

/* â”€â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.92);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  backdrop-filter: blur(8px);
}

.modal-overlay.open {
  opacity: 1;
  pointer-events: all;
}

.modal {
  background: var(--surface);
  border: 1px solid var(--border2);
  padding: 56px;
  width: 520px;
  max-width: 92vw;
  transform: translateY(24px);
  transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
  position: relative;
}

.modal::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.modal-overlay.open .modal { transform: translateY(0); }

.modal-eyebrow {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.2em;
  color: var(--gold);
  text-transform: uppercase;
  margin-bottom: 16px;
}

.modal h2 {
  font-family: var(--serif);
  font-size: 2.8rem;
  font-weight: 300;
  line-height: 1.05;
  letter-spacing: -0.02em;
  margin-bottom: 8px;
}

.modal-price {
  font-family: var(--mono);
  font-size: 0.7rem;
  color: var(--gold);
  margin-bottom: 32px;
  letter-spacing: 0.08em;
}

.modal-features {
  list-style: none;
  margin-bottom: 40px;
}

.modal-features li {
  font-size: 0.88rem;
  color: var(--text2);
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
  display: flex;
  gap: 12px;
  font-weight: 300;
  line-height: 1.5;
}

.modal-features li::before {
  content: 'âœ¦';
  color: var(--gold);
  font-size: 0.7rem;
  flex-shrink: 0;
  margin-top: 2px;
}

.modal-close {
  position: absolute;
  top: 24px; right: 24px;
  background: none;
  border: none;
  color: var(--text3);
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  cursor: crosshair;
  text-transform: uppercase;
}

.modal-close:hover { color: var(--text); }

/* â”€â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes rise {
  from { opacity: 0; transform: translateY(24px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.7s ease, transform 0.7s ease;
}
.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 900px) {
  .header { padding: 16px 24px; }
  .header-nav { display: none; }
  .hero { padding: 100px 24px 60px; }
  .hero-bottom { flex-direction: column; gap: 32px; align-items: flex-start; }
  .hero-stats { gap: 32px; }
  .proof-strip { padding: 16px 24px; }
  .paywall-section { grid-template-columns: 1fr; padding: 80px 24px; gap: 48px; }
  .app-section { padding: 48px 24px; }
  .scores-grid { grid-template-columns: 1fr; }
  .app-layout { grid-template-columns: 1fr; }
  .stats-row { grid-template-columns: 1fr 1fr; }
  .scenarios-grid { grid-template-columns: 1fr 1fr; }
  .footer { flex-direction: column; gap: 12px; padding: 24px; text-align: center; }
  .modal { padding: 36px 28px; }
}
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>

<!-- HEADER -->
<header class="header">
  <div class="logo-mark">
    <div class="logo-line"></div>
    <div class="logo-text">Ignite</div>
  </div>
  <nav class="header-nav">
    <a href="#how" class="nav-link">How it works</a>
    <a href="#pricing" class="nav-link">Pricing</a>
    <button class="btn-access" onclick="openModal()">Get Access â€” $39</button>
  </nav>
</header>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid"></div>

  <div class="hero-eyebrow">Monte Carlo Retirement Engine</div>

  <h1 class="hero-headline">
    Will your<br>
    money <em>last?</em>
  </h1>

  <div class="hero-bottom">
    <p class="hero-desc">
      10,000 simulations run in seconds. One number tells you everything. Built for the FIRE community â€” by people who take early retirement seriously.
    </p>
    <div class="hero-stats">
      <div>
        <div class="hero-stat-num">10K</div>
        <div class="hero-stat-label">Simulations per run</div>
      </div>
      <div>
        <div class="hero-stat-num">3</div>
        <div class="hero-stat-label">Seconds to result</div>
      </div>
      <div>
        <div class="hero-stat-num">$39</div>
        <div class="hero-stat-label">One-time. Forever.</div>
      </div>
    </div>
  </div>
</section>

<!-- PROOF STRIP -->
<div class="proof-strip">
  <div class="proof-item"><div class="proof-dot"></div>Monte Carlo Simulation</div>
  <div class="proof-item"><div class="proof-dot"></div>Safe Withdrawal Rate Analysis</div>
  <div class="proof-item"><div class="proof-dot"></div>Coast FIRE Calculator</div>
  <div class="proof-item"><div class="proof-dot"></div>Sequence of Returns Risk</div>
  <div class="proof-item"><div class="proof-dot"></div>Withdrawal Ladder Modeling</div>
  <div class="proof-item"><div class="proof-dot"></div>No Subscription. Ever.</div>
</div>

<!-- PAYWALL SECTION -->
<section class="paywall-section" id="pricing">
  <div class="paywall-left reveal">
    <h2>The only number<br>that <em>actually matters</em></h2>
    <p>
      Your FIRE Probability Score. How likely is your money to last 40+ years across 10,000 simulated market scenarios â€” including crashes, inflation shocks, and lost decades.
    </p>

    <ul class="features-list">
      <li>Full Monte Carlo with 10,000 retirement path simulations</li>
      <li>FIRE date calculator at current savings rate</li>
      <li>Coast FIRE number â€” when you can stop saving</li>
      <li>Stress test: Base, Conservative, and Bull market scenarios</li>
      <li>Withdrawal ladder â€” see inflation erode your spending power</li>
      <li>P10 / Median / P90 percentile path visualization</li>
      <li>Safe Withdrawal Rate sensitivity analysis</li>
    </ul>

    <div class="price-block">
      <div class="price-amount">$39</div>
      <div>
        <div class="price-label">One-time payment</div>
        <div class="price-label" style="color:var(--green); margin-top:2px;">Lifetime access</div>
      </div>
    </div>
    <div class="price-note">No subscription. No renewal. Own it forever.</div>

    <button class="btn-buy" onclick="openModal()">
      <span>Unlock Full Access</span>
      <span class="btn-buy-arrow">â†’</span>
    </button>

    <div class="guarantee">
      <span>â—</span>
      <span>30-day money back guarantee Â· Instant access Â· No account required</span>
    </div>
  </div>

  <div class="paywall-right reveal">
    <div class="preview-card">
      <!-- Blurred preview of the app -->
      <div class="preview-blur">
        <div class="fake-score-row" style="margin-bottom:20px;">
          <div class="fake-score">
            <div class="fake-score-label">FIRE Probability</div>
            <div class="fake-score-val" style="color:var(--green)">87.3%</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">FIRE Age</div>
            <div class="fake-score-val" style="color:var(--gold)">48</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Coast FIRE</div>
            <div class="fake-score-val">$312K</div>
          </div>
        </div>

        <div class="fake-chart">
          <div class="fake-line fake-line-1"></div>
          <div class="fake-line fake-line-2"></div>
          <div class="fake-line fake-line-3"></div>
          <svg class="fake-path" viewBox="0 0 400 140" preserveAspectRatio="none">
            <path d="M0,100 C50,90 100,60 150,70 C200,80 250,30 300,20 C350,10 380,15 400,10" stroke="#3d9970" stroke-width="1.5" fill="none" opacity="0.6"/>
            <path d="M0,110 C50,105 100,80 150,85 C200,90 250,55 300,45 C350,35 380,40 400,38" stroke="#c9a84c" stroke-width="2" fill="none"/>
            <path d="M0,120 C50,118 100,110 150,115 C200,120 250,100 300,108 C350,116 380,112 400,120" stroke="#c0392b" stroke-width="1.5" fill="none" opacity="0.6"/>
          </svg>
        </div>

        <div class="fake-score-row">
          <div class="fake-score">
            <div class="fake-score-label">Median End</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--gold)">$2.4M</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Worst 10%</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--red)">$0</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Best 90%</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--green)">$6.1M</div>
          </div>
        </div>
      </div>

      <div class="preview-lock">
        <div class="lock-icon">ğŸ”’</div>
        <div class="lock-text">Full Access â€” $39</div>
        <div class="lock-sub">One-time Â· Lifetime Â· Instant</div>
        <button class="btn-buy" style="margin-top:16px; font-size:0.6rem; padding:14px 28px;" onclick="openModal()">
          Unlock Now â†’
        </button>
      </div>
    </div>
  </div>
</section>

<!-- APP SECTION (hidden until unlocked) -->
<section class="app-section" id="appSection">
  <div style="margin-bottom:48px;">
    <div style="font-family:var(--mono);font-size:0.55rem;letter-spacing:0.22em;color:var(--gold);text-transform:uppercase;margin-bottom:8px;">// Full Access Unlocked</div>
    <h2 style="font-family:var(--serif);font-size:2.5rem;font-weight:300;letter-spacing:-0.02em;">Your FIRE Simulator</h2>
  </div>

  <!-- Score Cards -->
  <div class="scores-grid" style="margin-bottom:2px;">
    <div class="score-card" id="probCard">
      <div class="score-tag">FIRE Probability</div>
      <div class="score-num" id="probScore" style="color:var(--text2)">â€”</div>
      <div class="score-sub" id="probSub">Run simulation to calculate</div>
      <div class="score-bar"><div class="score-bar-fill" id="probBar" style="width:0%;background:var(--gold)"></div></div>
    </div>
    <div class="score-card">
      <div class="score-tag">FIRE Age</div>
      <div class="score-num" id="fireAge" style="color:var(--text2)">â€”</div>
      <div class="score-sub" id="fireAgeSub">At current savings rate</div>
    </div>
    <div class="score-card">
      <div class="score-tag">Coast FIRE Number</div>
      <div class="score-num" id="coastNum" style="font-size:2rem;color:var(--text2)">â€”</div>
      <div class="score-sub" id="coastSub">Amount needed to coast</div>
    </div>
  </div>

  <!-- Main Layout -->
  <div class="app-layout">
    <div class="inputs-panel">
      <div class="panel-label">// Portfolio Parameters</div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Current Portfolio</span>
          <span class="input-val" id="portVal">$500K</span>
        </div>
        <input type="range" id="portfolio" min="10000" max="5000000" step="10000" value="500000" oninput="fmtSlider('portVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Annual Spending (Retirement)</span>
          <span class="input-val" id="spendVal">$40K</span>
        </div>
        <input type="range" id="spending" min="10000" max="200000" step="1000" value="40000" oninput="fmtSlider('spendVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Annual Savings (Now)</span>
          <span class="input-val" id="savingsVal">$30K</span>
        </div>
        <input type="range" id="savings" min="0" max="200000" step="1000" value="30000" oninput="fmtSlider('savingsVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Current Age</span>
          <span class="input-val" id="ageVal">35</span>
        </div>
        <input type="range" id="currentAge" min="20" max="65" step="1" value="35" oninput="fmtSlider('ageVal',this.value,'plain')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Target Retirement Age</span>
          <span class="input-val" id="retireVal">50</span>
        </div>
        <input type="range" id="retireAge" min="30" max="75" step="1" value="50" oninput="fmtSlider('retireVal',this.value,'plain')">
      </div>

      <div class="divider"></div>
      <div class="panel-label">// Market Assumptions</div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Expected Return</span>
          <span class="input-val" id="retVal">7.0%</span>
        </div>
        <input type="range" id="returnRate" min="3" max="12" step="0.1" value="7" oninput="fmtSlider('retVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Safe Withdrawal Rate</span>
          <span class="input-val" id="swrVal">4.0%</span>
        </div>
        <input type="range" id="swr" min="2" max="6" step="0.1" value="4" oninput="fmtSlider('swrVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Inflation Rate</span>
          <span class="input-val" id="inflVal">3.0%</span>
        </div>
        <input type="range" id="inflation" min="1" max="6" step="0.1" value="3" oninput="fmtSlider('inflVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row"><span class="input-name">Retirement Duration</span></div>
        <select class="select-field" id="duration">
          <option value="30">30 years</option>
          <option value="40" selected>40 years</option>
          <option value="50">50 years</option>
          <option value="60">60 years</option>
        </select>
      </div>

      <button class="run-btn" id="runBtn" onclick="runSim()">
        <span>â–¶ Run 10,000 Simulations</span>
      </button>
    </div>

    <div class="chart-panel">
      <div class="panel-label">// Monte Carlo Output</div>
      <div class="chart-tabs">
        <button class="tab-btn active" onclick="switchTab('mc',this)">Paths</button>
        <button class="tab-btn" onclick="switchTab('dist',this)">Distribution</button>
        <button class="tab-btn" onclick="switchTab('ladder',this)">Withdrawal Ladder</button>
      </div>
      <canvas id="mainChart" height="320"></canvas>
    </div>
  </div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-label">Median Portfolio End</div>
      <div class="stat-val" id="statMedian" style="color:var(--gold)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Worst 10th Percentile</div>
      <div class="stat-val" id="statWorst" style="color:var(--red)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Best 90th Percentile</div>
      <div class="stat-val" id="statBest" style="color:var(--green)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Required FIRE Number</div>
      <div class="stat-val" id="statFire">â€”</div>
    </div>
  </div>

  <!-- Scenarios -->
  <div class="scenarios-panel">
    <div class="panel-label">// Quick Scenarios</div>
    <div class="scenarios-grid">
      <button class="scenario-btn" onclick="applyScenario('base')">
        <div class="scenario-name">Base Case</div>
        <div class="scenario-desc">7% return Â· 3% inflation Â· Historical US average</div>
      </button>
      <button class="scenario-btn" onclick="applyScenario('conservative')">
        <div class="scenario-name">Conservative</div>
        <div class="scenario-desc">5% return Â· 3.5% inflation Â· Lower-return decade</div>
      </button>
      <button class="scenario-btn" onclick="applyScenario('bull')">
        <div class="scenario-name">Bull Market</div>
        <div class="scenario-desc">9% return Â· 2.5% inflation Â· Strong equity run</div>
      </button>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-left">Â© 2025 IGNITE â€” FIRE Probability Engine</div>
  <div class="footer-right">Built for the FIRE community Â· No subscription Â· No tracking</div>
</footer>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModalOutside(event)">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">âœ• Close</button>
    <div class="modal-eyebrow">One-time purchase Â· Lifetime access</div>
    <h2>Unlock<br>Full Access</h2>
    <div class="modal-price">$39 Â· Pay once Â· Use forever Â· 30-day guarantee</div>

    <ul class="modal-features">
      <li>10,000 Monte Carlo retirement path simulations</li>
      <li>FIRE Probability Score â€” one number, total clarity</li>
      <li>FIRE date calculator at current savings trajectory</li>
      <li>Coast FIRE number â€” when you can stop contributing</li>
      <li>Safe Withdrawal Rate sensitivity testing</li>
      <li>Withdrawal ladder with inflation modeling</li>
      <li>Base, Conservative, and Bull market scenarios</li>
      <li>P10 / Median / P90 percentile visualizations</li>
    </ul>

    <button class="btn-buy" style="width:100%;justify-content:center;" onclick="handlePurchase()">
      Pay $39 â€” Get Instant Access â†’
    </button>

    <div class="guarantee" style="margin-top:16px;justify-content:center;">
      <span>â—</span>
      <span>30-day money back guarantee Â· Secure payment via Stripe</span>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<script>
// â”€â”€â”€ Cursor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const cur = document.getElementById('cursor');
document.addEventListener('mousemove', e => {
  cur.style.left = e.clientX - 3 + 'px';
  cur.style.top  = e.clientY - 3 + 'px';
});

// â”€â”€â”€ Reveal on scroll â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const obs = new IntersectionObserver(entries => {
  entries.forEach((e, i) => {
    if (e.isIntersecting) {
      setTimeout(() => e.target.classList.add('visible'), i * 120);
    }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

// â”€â”€â”€ Paywall â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DEMO MODE: set to true to bypass paywall for testing
const DEMO_MODE = false;
let unlocked = DEMO_MODE;

// Check localStorage for purchase
if (localStorage.getItem('ignite_unlocked') === 'true') unlocked = true;
if (unlocked) showApp();

function handlePurchase() {
  // REPLACE THIS URL with your Stripe / Lemon Squeezy checkout link
  const CHECKOUT_URL = 'https://buy.stripe.com/YOUR_LINK_HERE';
  window.location.href = CHECKOUT_URL;

  // FOR DEMO/TESTING â€” comment out above and uncomment below:
  // unlocked = true;
  // localStorage.setItem('ignite_unlocked', 'true');
  // closeModal();
  // showApp();
  // document.getElementById('appSection').scrollIntoView({ behavior: 'smooth' });
}

function showApp() {
  document.getElementById('appSection').classList.add('unlocked');
  setTimeout(runSim, 300);
}

// â”€â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openModal() {
  if (unlocked) {
    document.getElementById('appSection').scrollIntoView({ behavior: 'smooth' });
    return;
  }
  document.getElementById('modalOverlay').classList.add('open');
}
function closeModal() { document.getElementById('modalOverlay').classList.remove('open'); }
function closeModalOutside(e) { if (e.target.id === 'modalOverlay') closeModal(); }

// â”€â”€â”€ Formatting â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function fmt(n) {
  const a = Math.abs(n);
  if (a >= 1e6) return '$' + (n/1e6).toFixed(2) + 'M';
  if (a >= 1e3) return '$' + (n/1e3).toFixed(0) + 'K';
  return '$' + Math.round(n);
}

function fmtSlider(id, val, type) {
  val = parseFloat(val);
  let out;
  if (type === 'money') out = fmt(val);
  else if (type === 'pct') out = val.toFixed(1) + '%';
  else out = String(Math.round(val));
  document.getElementById(id).textContent = out;
}

// â”€â”€â”€ Simulation Engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function randNorm(mean, std) {
  let u = 0, v = 0;
  while (!u) u = Math.random();
  while (!v) v = Math.random();
  return mean + std * Math.sqrt(-2 * Math.log(u)) * Math.cos(2 * Math.PI * v);
}

function monteCarlo(p, n = 10000) {
  const { portfolio, spending, savings, currentAge, retireAge, returnRate, inflation, duration } = p;
  const yrs = Math.max(0, retireAge - currentAge);
  const vol = 0.16;
  let successes = 0;
  const finals = [];
  const allPaths = [];

  for (let i = 0; i < n; i++) {
    let bal = portfolio;
    for (let y = 0; y < yrs; y++) bal = bal * (1 + randNorm(returnRate, vol)) + savings;

    const path = [Math.max(bal, 0)];
    let failed = false;
    for (let y = 0; y < duration; y++) {
      bal = bal * (1 + randNorm(returnRate - 0.005, vol)) - spending * Math.pow(1 + inflation, y);
      path.push(Math.max(bal, 0));
      if (bal <= 0) { failed = true; break; }
    }
    if (!failed) successes++;
    finals.push(bal);
    allPaths.push(path);
  }

  allPaths.sort((a, b) => (b[b.length-1]||0) - (a[a.length-1]||0));
  finals.sort((a, b) => a - b);

  return {
    probability: (successes / n) * 100,
    p10: allPaths[Math.floor(n * 0.9)],
    p50: allPaths[Math.floor(n * 0.5)],
    p90: allPaths[Math.floor(n * 0.1)],
    median: finals[Math.floor(n * 0.5)],
    worst10: Math.max(finals[Math.floor(n * 0.1)], 0),
    best90: finals[Math.floor(n * 0.9)],
    finals,
  };
}

function getParams() {
  return {
    portfolio:  +document.getElementById('portfolio').value,
    spending:   +document.getElementById('spending').value,
    savings:    +document.getElementById('savings').value,
    currentAge: +document.getElementById('currentAge').value,
    retireAge:  +document.getElementById('retireAge').value,
    returnRate: +document.getElementById('returnRate').value / 100,
    swr:        +document.getElementById('swr').value / 100,
    inflation:  +document.getElementById('inflation').value / 100,
    duration:   +document.getElementById('duration').value,
  };
}

function calcFire(p) {
  const fireNum = p.spending / p.swr;
  let bal = p.portfolio, yrs = 0;
  while (bal < fireNum && yrs < 60) { bal = bal * 1.07 + p.savings; yrs++; }
  return { fireNum, fireAge: p.currentAge + yrs, yrs };
}

function calcCoast(p) {
  const fireNum = p.spending / p.swr;
  return fireNum / Math.pow(1.07, Math.max(1, p.retireAge - p.currentAge));
}

// â”€â”€â”€ Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let chart = null, curTab = 'mc', lastResults = null, lastParams = null;

function switchTab(tab, el) {
  curTab = tab;
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  if (lastResults) renderChart(lastResults, lastParams);
}

function renderChart(r, p) {
  const ctx = document.getElementById('mainChart').getContext('2d');
  if (chart) chart.destroy();

  const dur = p.duration;
  const labels = Array.from({length: dur + 1}, (_, i) => p.retireAge + i);

  const baseOpts = {
    responsive: true,
    maintainAspectRatio: true,
    animation: { duration: 700, easing: 'easeOutQuart' },
    plugins: {
      legend: { display: curTab !== 'mc', labels: { color: '#4a4a52', font: { family: 'DM Mono', size: 9 } } },
      tooltip: {
        backgroundColor: '#161618',
        borderColor: '#2a2a30',
        borderWidth: 1,
        titleColor: '#c9a84c',
        bodyColor: '#8a8a8f',
        titleFont: { family: 'DM Mono', size: 9 },
        bodyFont:  { family: 'DM Mono', size: 9 },
      }
    },
    scales: {
      x: { grid: { color: 'rgba(255,255,255,0.02)' }, ticks: { color: '#4a4a52', font: { family: 'DM Mono', size: 8 }, maxTicksLimit: 8 } },
      y: { grid: { color: 'rgba(255,255,255,0.03)' }, ticks: { color: '#4a4a52', font: { family: 'DM Mono', size: 8 } } },
    }
  };

  if (curTab === 'mc') {
    chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [
          { label: 'P90', data: r.p90?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(61,153,112,0.7)', borderWidth:2, pointRadius:0, fill:false, tension:0.3 },
          { label: 'Median', data: r.p50?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(201,168,76,0.95)', borderWidth:2.5, pointRadius:0, fill:false, tension:0.3 },
          { label: 'P10', data: r.p10?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(192,57,43,0.7)', borderWidth:2, pointRadius:0, fill:false, tension:0.3 },
        ]
      },
      options: { ...baseOpts }
    });
  } else if (curTab === 'dist') {
    const vals = r.finals.map(v => v/1e6);
    const mx = Math.min(Math.max(...vals.filter(v=>v<100)), 20);
    const mn = Math.min(...vals);
    const bins = 40, bs = (mx - mn) / bins;
    const counts = new Array(bins).fill(0);
    vals.forEach(v => { const i = Math.min(Math.floor((v-mn)/bs), bins-1); if (i>=0) counts[i]++; });
    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: counts.map((_,i) => (mn + i*bs).toFixed(1)),
        datasets: [{ label: 'Simulations', data: counts, backgroundColor: counts.map((_,i) => (mn+i*bs)<=0 ? 'rgba(192,57,43,0.5)' : 'rgba(201,168,76,0.4)'), borderWidth:0 }]
      },
      options: { ...baseOpts }
    });
  } else {
    const yrs = Array.from({length: dur}, (_, i) => i + 1);
    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: yrs.map(y => p.retireAge + y),
        datasets: [
          { label: 'Nominal ($K)', data: yrs.map(y => p.spending * Math.pow(1+p.inflation,y)/1e3), backgroundColor:'rgba(201,168,76,0.4)', borderWidth:0 },
          { label: "Real (Today's $K)", data: yrs.map(() => p.spending/1e3), backgroundColor:'rgba(61,153,112,0.3)', borderWidth:0 },
        ]
      },
      options: { ...baseOpts }
    });
  }
}

// â”€â”€â”€ Run Simulation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function runSim() {
  const btn = document.getElementById('runBtn');
  btn.disabled = true;
  btn.querySelector('span').textContent = 'âŸ³ Simulating 10,000 paths...';

  setTimeout(() => {
    const p = getParams();
    const r = monteCarlo(p);
    const fi = calcFire(p);
    const coast = calcCoast(p);
    lastResults = r; lastParams = p;

    // Update scores
    const prob = r.probability;
    const pEl = document.getElementById('probScore');
    pEl.textContent = prob.toFixed(1) + '%';
    pEl.style.color = prob >= 85 ? 'var(--green)' : prob >= 65 ? 'var(--gold)' : 'var(--red)';
    document.getElementById('probSub').textContent = prob >= 85 ? 'High confidence â€” solid plan' : prob >= 65 ? 'Moderate â€” consider adjustments' : 'High risk â€” revise now';
    document.getElementById('probBar').style.width = prob + '%';
    document.getElementById('probBar').style.background = prob >= 85 ? 'var(--green)' : prob >= 65 ? 'var(--gold)' : 'var(--red)';
    document.getElementById('probCard').classList.add('lit');

    document.getElementById('fireAge').textContent = fi.fireAge <= p.currentAge + 60 ? fi.fireAge : '70+';
    document.getElementById('fireAge').style.color = fi.fireAge <= p.retireAge ? 'var(--green)' : 'var(--gold)';
    document.getElementById('fireAgeSub').textContent = fi.fireAge <= p.retireAge ? `${fi.yrs} yrs â€” on track âœ“` : `${fi.yrs} yrs â€” ${fi.fireAge - p.retireAge} past target`;

    document.getElementById('coastNum').textContent = fmt(coast);
    document.getElementById('coastNum').style.color = p.portfolio >= coast ? 'var(--green)' : 'var(--text2)';
    document.getElementById('coastSub').textContent = p.portfolio >= coast ? 'âœ“ Coast FIRE achieved!' : `Need ${fmt(coast - p.portfolio)} more`;

    document.getElementById('statMedian').textContent = fmt(r.median);
    document.getElementById('statWorst').textContent = fmt(r.worst10);
    document.getElementById('statBest').textContent = fmt(r.best90);
    document.getElementById('statFire').textContent = fmt(fi.fireNum);

    renderChart(r, p);

    btn.disabled = false;
    btn.querySelector('span').textContent = 'â–¶ Run 10,000 Simulations';
  }, 60);
}

function applyScenario(name) {
  const s = { base:{ret:7,inf:3}, conservative:{ret:5,inf:3.5}, bull:{ret:9,inf:2.5} }[name];
  document.getElementById('returnRate').value = s.ret;
  document.getElementById('inflation').value = s.inf;
  document.getElementById('retVal').textContent = s.ret.toFixed(1) + '%';
  document.getElementById('inflVal').textContent = s.inf.toFixed(1) + '%';
  runSim();
}
</script>
</body>
</html>body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  min-height: 100vh;
  overflow-x: hidden;
  cursor: crosshair;
}

/* Custom cursor */
.cursor {
  width: 6px; height: 6px;
  background: var(--gold);
  border-radius: 50%;
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  transition: transform 0.15s ease;
  mix-blend-mode: difference;
}

/* Grain */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9998;
}

/* â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.header {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 48px;
  border-bottom: 1px solid var(--border);
  background: rgba(8,8,8,0.9);
  backdrop-filter: blur(20px);
}

.logo-mark {
  display: flex;
  align-items: center;
  gap: 14px;
}

.logo-line {
  width: 32px;
  height: 1px;
  background: var(--gold);
}

.logo-text {
  font-family: var(--serif);
  font-size: 1.1rem;
  font-weight: 600;
  letter-spacing: 0.25em;
  color: var(--text);
  text-transform: uppercase;
}

.header-nav {
  display: flex;
  align-items: center;
  gap: 32px;
}

.nav-link {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  color: var(--text2);
  text-decoration: none;
  text-transform: uppercase;
  transition: color 0.2s;
}
.nav-link:hover { color: var(--gold); }

.btn-access {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 10px 24px;
  cursor: crosshair;
  font-weight: 500;
  transition: opacity 0.2s;
}
.btn-access:hover { opacity: 0.85; }

/* â”€â”€â”€ HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 0 48px 80px;
  position: relative;
  overflow: hidden;
}

.hero-bg {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 60% 50% at 70% 40%, rgba(201,168,76,0.04) 0%, transparent 70%),
    radial-gradient(ellipse 40% 60% at 20% 70%, rgba(61,153,112,0.03) 0%, transparent 60%);
}

.hero-grid {
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(var(--border) 1px, transparent 1px),
    linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 80px 80px;
  opacity: 0.3;
  mask-image: radial-gradient(ellipse 80% 80% at 50% 50%, black 20%, transparent 80%);
}

.hero-eyebrow {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.3em;
  color: var(--gold);
  text-transform: uppercase;
  margin-bottom: 24px;
  opacity: 0;
  animation: rise 0.8s 0.2s ease forwards;
  display: flex;
  align-items: center;
  gap: 16px;
}

.hero-eyebrow::before {
  content: '';
  display: block;
  width: 40px;
  height: 1px;
  background: var(--gold);
}

.hero-headline {
  font-family: var(--serif);
  font-size: clamp(4rem, 9vw, 9rem);
  font-weight: 300;
  line-height: 0.92;
  letter-spacing: -0.02em;
  color: var(--text);
  margin-bottom: 40px;
  opacity: 0;
  animation: rise 0.8s 0.35s ease forwards;
}

.hero-headline em {
  font-style: italic;
  color: var(--gold);
}

.hero-bottom {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  opacity: 0;
  animation: rise 0.8s 0.5s ease forwards;
}

.hero-desc {
  max-width: 420px;
  font-size: 0.95rem;
  color: var(--text2);
  line-height: 1.75;
  font-weight: 300;
}

.hero-stats {
  display: flex;
  gap: 48px;
}

.hero-stat-num {
  font-family: var(--serif);
  font-size: 2.8rem;
  font-weight: 300;
  color: var(--gold);
  line-height: 1;
  letter-spacing: -0.02em;
}

.hero-stat-label {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
  margin-top: 6px;
}

/* â”€â”€â”€ PROOF STRIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.proof-strip {
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  padding: 20px 48px;
  display: flex;
  align-items: center;
  gap: 48px;
  overflow: hidden;
}

.proof-item {
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.1em;
  color: var(--text3);
  text-transform: uppercase;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 10px;
}

.proof-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--gold);
  flex-shrink: 0;
}

/* â”€â”€â”€ PAYWALL SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.paywall-section {
  padding: 120px 48px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 80px;
  align-items: center;
  border-bottom: 1px solid var(--border);
}

.paywall-left h2 {
  font-family: var(--serif);
  font-size: clamp(2.5rem, 4vw, 4rem);
  font-weight: 300;
  line-height: 1.1;
  letter-spacing: -0.02em;
  margin-bottom: 24px;
}

.paywall-left h2 em {
  font-style: italic;
  color: var(--gold);
}

.paywall-left p {
  color: var(--text2);
  font-size: 0.95rem;
  line-height: 1.75;
  font-weight: 300;
  margin-bottom: 40px;
  max-width: 400px;
}

.features-list {
  list-style: none;
  margin-bottom: 48px;
}

.features-list li {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 14px 0;
  border-bottom: 1px solid var(--border);
  font-size: 0.9rem;
  color: var(--text2);
  font-weight: 300;
}

.features-list li::before {
  content: 'â†’';
  color: var(--gold);
  flex-shrink: 0;
  font-family: var(--mono);
  font-size: 0.75rem;
  margin-top: 1px;
}

.price-block {
  display: flex;
  align-items: baseline;
  gap: 12px;
  margin-bottom: 8px;
}

.price-amount {
  font-family: var(--serif);
  font-size: 4rem;
  font-weight: 300;
  color: var(--gold);
  letter-spacing: -0.03em;
  line-height: 1;
}

.price-label {
  font-family: var(--mono);
  font-size: 0.65rem;
  color: var(--text3);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.price-note {
  font-family: var(--mono);
  font-size: 0.65rem;
  color: var(--text3);
  letter-spacing: 0.08em;
  margin-bottom: 32px;
}

.btn-buy {
  display: inline-flex;
  align-items: center;
  gap: 16px;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 18px 40px;
  font-family: var(--mono);
  font-size: 0.7rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  cursor: crosshair;
  font-weight: 500;
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
}

.btn-buy::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.1);
  transform: translateX(-100%);
  transition: transform 0.3s ease;
}

.btn-buy:hover::after { transform: translateX(0); }

.btn-buy-arrow { font-size: 1rem; }

.guarantee {
  margin-top: 16px;
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  letter-spacing: 0.08em;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Preview card */
.paywall-right {
  position: relative;
}

.preview-card {
  background: var(--surface);
  border: 1px solid var(--border2);
  padding: 32px;
  position: relative;
  overflow: hidden;
}

.preview-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.preview-blur {
  filter: blur(6px);
  opacity: 0.4;
  pointer-events: none;
  user-select: none;
}

.preview-lock {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  background: radial-gradient(ellipse at center, rgba(8,8,8,0.8) 0%, rgba(8,8,8,0.4) 100%);
}

.lock-icon {
  font-size: 2rem;
  filter: grayscale(1);
}

.lock-text {
  font-family: var(--serif);
  font-size: 1.4rem;
  font-weight: 300;
  color: var(--text);
  letter-spacing: 0.05em;
}

.lock-sub {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
}

/* Fake chart lines */
.fake-chart {
  height: 140px;
  position: relative;
  margin-bottom: 24px;
}

.fake-line {
  position: absolute;
  height: 1px;
  left: 0; right: 0;
  background: var(--border);
}

.fake-line-1 { top: 20%; }
.fake-line-2 { top: 50%; }
.fake-line-3 { top: 80%; }

.fake-path {
  position: absolute;
  inset: 0;
}

.fake-score-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
}

.fake-score {
  background: var(--surface2);
  border: 1px solid var(--border);
  padding: 14px;
}

.fake-score-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.12em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 8px;
}

.fake-score-val {
  font-family: var(--serif);
  font-size: 1.6rem;
  font-weight: 300;
  letter-spacing: -0.02em;
}

/* â”€â”€â”€ APP (LOCKED BY DEFAULT) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.app-section {
  display: none;
  padding: 80px 48px;
  animation: fadeIn 0.6s ease;
}

.app-section.unlocked {
  display: block;
}

/* Score cards */
.scores-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 2px;
  margin-bottom: 2px;
}

.score-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 28px 32px;
  position: relative;
  overflow: hidden;
  transition: border-color 0.3s;
}

.score-card::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: var(--gold);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 1s cubic-bezier(0.16,1,0.3,1);
}

.score-card.lit::after { transform: scaleX(1); }

.score-tag {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.2em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 16px;
}

.score-num {
  font-family: var(--serif);
  font-size: 3.2rem;
  font-weight: 300;
  letter-spacing: -0.03em;
  line-height: 1;
  transition: color 0.5s;
}

.score-sub {
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  margin-top: 10px;
  letter-spacing: 0.05em;
}

.score-bar {
  height: 2px;
  background: var(--border);
  margin-top: 16px;
  overflow: hidden;
}

.score-bar-fill {
  height: 100%;
  transition: width 1.2s cubic-bezier(0.16,1,0.3,1);
}

/* Main layout */
.app-layout {
  display: grid;
  grid-template-columns: 360px 1fr;
  gap: 2px;
  margin-bottom: 2px;
}

.inputs-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
}

.panel-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.22em;
  color: var(--text3);
  text-transform: uppercase;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 28px;
}

.input-group { margin-bottom: 22px; }

.input-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}

.input-name {
  font-size: 0.8rem;
  color: var(--text2);
  font-weight: 300;
}

.input-val {
  font-family: var(--mono);
  font-size: 0.8rem;
  color: var(--gold);
}

input[type="range"] {
  -webkit-appearance: none;
  width: 100%;
  height: 1px;
  background: var(--border2);
  outline: none;
  cursor: crosshair;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
  background: var(--gold);
  border-radius: 50%;
  cursor: crosshair;
  transition: transform 0.15s;
}

input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.4); }

.divider { border: none; border-top: 1px solid var(--border); margin: 24px 0; }

.select-field {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 10px 12px;
  font-family: var(--mono);
  font-size: 0.75rem;
  outline: none;
  cursor: crosshair;
  appearance: none;
}

.run-btn {
  width: 100%;
  background: var(--gold);
  color: #080808;
  border: none;
  padding: 16px;
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  cursor: crosshair;
  font-weight: 500;
  margin-top: 8px;
  transition: opacity 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.run-btn:hover { opacity: 0.88; }
.run-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* Chart */
.chart-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
  display: flex;
  flex-direction: column;
}

.chart-tabs {
  display: flex;
  gap: 2px;
  margin-bottom: 24px;
}

.tab-btn {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text3);
  cursor: crosshair;
  transition: all 0.2s;
}

.tab-btn.active {
  background: var(--gold);
  color: #080808;
  border-color: var(--gold);
}

canvas { width: 100% !important; flex: 1; }

/* Stats */
.stats-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 2px;
  margin-bottom: 2px;
}

.stat-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 20px 24px;
}

.stat-label {
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.15em;
  color: var(--text3);
  text-transform: uppercase;
  margin-bottom: 10px;
}

.stat-val {
  font-family: var(--mono);
  font-size: 1.2rem;
  font-weight: 500;
}

/* Scenarios */
.scenarios-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 32px;
  margin-bottom: 2px;
}

.scenarios-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 20px;
}

.scenario-btn {
  background: var(--surface2);
  border: 1px solid var(--border);
  padding: 18px;
  cursor: crosshair;
  text-align: left;
  transition: border-color 0.2s;
}

.scenario-btn:hover { border-color: var(--gold); }

.scenario-name {
  font-family: var(--sans);
  font-size: 0.82rem;
  font-weight: 400;
  color: var(--text);
  margin-bottom: 4px;
}

.scenario-desc {
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--text3);
  line-height: 1.5;
  letter-spacing: 0.03em;
}

/* â”€â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.footer {
  border-top: 1px solid var(--border);
  padding: 32px 48px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.footer-left {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  color: var(--text3);
}

.footer-right {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  color: var(--text3);
}

/* â”€â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.92);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  backdrop-filter: blur(8px);
}

.modal-overlay.open {
  opacity: 1;
  pointer-events: all;
}

.modal {
  background: var(--surface);
  border: 1px solid var(--border2);
  padding: 56px;
  width: 520px;
  max-width: 92vw;
  transform: translateY(24px);
  transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
  position: relative;
}

.modal::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}

.modal-overlay.open .modal { transform: translateY(0); }

.modal-eyebrow {
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.2em;
  color: var(--gold);
  text-transform: uppercase;
  margin-bottom: 16px;
}

.modal h2 {
  font-family: var(--serif);
  font-size: 2.8rem;
  font-weight: 300;
  line-height: 1.05;
  letter-spacing: -0.02em;
  margin-bottom: 8px;
}

.modal-price {
  font-family: var(--mono);
  font-size: 0.7rem;
  color: var(--gold);
  margin-bottom: 32px;
  letter-spacing: 0.08em;
}

.modal-features {
  list-style: none;
  margin-bottom: 40px;
}

.modal-features li {
  font-size: 0.88rem;
  color: var(--text2);
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
  display: flex;
  gap: 12px;
  font-weight: 300;
  line-height: 1.5;
}

.modal-features li::before {
  content: 'âœ¦';
  color: var(--gold);
  font-size: 0.7rem;
  flex-shrink: 0;
  margin-top: 2px;
}

.modal-close {
  position: absolute;
  top: 24px; right: 24px;
  background: none;
  border: none;
  color: var(--text3);
  font-family: var(--mono);
  font-size: 0.6rem;
  letter-spacing: 0.1em;
  cursor: crosshair;
  text-transform: uppercase;
}

.modal-close:hover { color: var(--text); }

/* â”€â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes rise {
  from { opacity: 0; transform: translateY(24px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.7s ease, transform 0.7s ease;
}
.reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 900px) {
  .header { padding: 16px 24px; }
  .header-nav { display: none; }
  .hero { padding: 100px 24px 60px; }
  .hero-bottom { flex-direction: column; gap: 32px; align-items: flex-start; }
  .hero-stats { gap: 32px; }
  .proof-strip { padding: 16px 24px; }
  .paywall-section { grid-template-columns: 1fr; padding: 80px 24px; gap: 48px; }
  .app-section { padding: 48px 24px; }
  .scores-grid { grid-template-columns: 1fr; }
  .app-layout { grid-template-columns: 1fr; }
  .stats-row { grid-template-columns: 1fr 1fr; }
  .scenarios-grid { grid-template-columns: 1fr 1fr; }
  .footer { flex-direction: column; gap: 12px; padding: 24px; text-align: center; }
  .modal { padding: 36px 28px; }
}
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>

<!-- HEADER -->
<header class="header">
  <div class="logo-mark">
    <div class="logo-line"></div>
    <div class="logo-text">Ignite</div>
  </div>
  <nav class="header-nav">
    <a href="#how" class="nav-link">How it works</a>
    <a href="#pricing" class="nav-link">Pricing</a>
    <button class="btn-access" onclick="openModal()">Get Access â€” $39</button>
  </nav>
</header>

<!-- HERO -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid"></div>

  <div class="hero-eyebrow">Monte Carlo Retirement Engine</div>

  <h1 class="hero-headline">
    Will your<br>
    money <em>last?</em>
  </h1>

  <div class="hero-bottom">
    <p class="hero-desc">
      10,000 simulations run in seconds. One number tells you everything. Built for the FIRE community â€” by people who take early retirement seriously.
    </p>
    <div class="hero-stats">
      <div>
        <div class="hero-stat-num">10K</div>
        <div class="hero-stat-label">Simulations per run</div>
      </div>
      <div>
        <div class="hero-stat-num">3</div>
        <div class="hero-stat-label">Seconds to result</div>
      </div>
      <div>
        <div class="hero-stat-num">$39</div>
        <div class="hero-stat-label">One-time. Forever.</div>
      </div>
    </div>
  </div>
</section>

<!-- PROOF STRIP -->
<div class="proof-strip">
  <div class="proof-item"><div class="proof-dot"></div>Monte Carlo Simulation</div>
  <div class="proof-item"><div class="proof-dot"></div>Safe Withdrawal Rate Analysis</div>
  <div class="proof-item"><div class="proof-dot"></div>Coast FIRE Calculator</div>
  <div class="proof-item"><div class="proof-dot"></div>Sequence of Returns Risk</div>
  <div class="proof-item"><div class="proof-dot"></div>Withdrawal Ladder Modeling</div>
  <div class="proof-item"><div class="proof-dot"></div>No Subscription. Ever.</div>
</div>

<!-- PAYWALL SECTION -->
<section class="paywall-section" id="pricing">
  <div class="paywall-left reveal">
    <h2>The only number<br>that <em>actually matters</em></h2>
    <p>
      Your FIRE Probability Score. How likely is your money to last 40+ years across 10,000 simulated market scenarios â€” including crashes, inflation shocks, and lost decades.
    </p>

    <ul class="features-list">
      <li>Full Monte Carlo with 10,000 retirement path simulations</li>
      <li>FIRE date calculator at current savings rate</li>
      <li>Coast FIRE number â€” when you can stop saving</li>
      <li>Stress test: Base, Conservative, and Bull market scenarios</li>
      <li>Withdrawal ladder â€” see inflation erode your spending power</li>
      <li>P10 / Median / P90 percentile path visualization</li>
      <li>Safe Withdrawal Rate sensitivity analysis</li>
    </ul>

    <div class="price-block">
      <div class="price-amount">$39</div>
      <div>
        <div class="price-label">One-time payment</div>
        <div class="price-label" style="color:var(--green); margin-top:2px;">Lifetime access</div>
      </div>
    </div>
    <div class="price-note">No subscription. No renewal. Own it forever.</div>

    <button class="btn-buy" onclick="openModal()">
      <span>Unlock Full Access</span>
      <span class="btn-buy-arrow">â†’</span>
    </button>

    <div class="guarantee">
      <span>â—</span>
      <span>30-day money back guarantee Â· Instant access Â· No account required</span>
    </div>
  </div>

  <div class="paywall-right reveal">
    <div class="preview-card">
      <!-- Blurred preview of the app -->
      <div class="preview-blur">
        <div class="fake-score-row" style="margin-bottom:20px;">
          <div class="fake-score">
            <div class="fake-score-label">FIRE Probability</div>
            <div class="fake-score-val" style="color:var(--green)">87.3%</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">FIRE Age</div>
            <div class="fake-score-val" style="color:var(--gold)">48</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Coast FIRE</div>
            <div class="fake-score-val">$312K</div>
          </div>
        </div>

        <div class="fake-chart">
          <div class="fake-line fake-line-1"></div>
          <div class="fake-line fake-line-2"></div>
          <div class="fake-line fake-line-3"></div>
          <svg class="fake-path" viewBox="0 0 400 140" preserveAspectRatio="none">
            <path d="M0,100 C50,90 100,60 150,70 C200,80 250,30 300,20 C350,10 380,15 400,10" stroke="#3d9970" stroke-width="1.5" fill="none" opacity="0.6"/>
            <path d="M0,110 C50,105 100,80 150,85 C200,90 250,55 300,45 C350,35 380,40 400,38" stroke="#c9a84c" stroke-width="2" fill="none"/>
            <path d="M0,120 C50,118 100,110 150,115 C200,120 250,100 300,108 C350,116 380,112 400,120" stroke="#c0392b" stroke-width="1.5" fill="none" opacity="0.6"/>
          </svg>
        </div>

        <div class="fake-score-row">
          <div class="fake-score">
            <div class="fake-score-label">Median End</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--gold)">$2.4M</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Worst 10%</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--red)">$0</div>
          </div>
          <div class="fake-score">
            <div class="fake-score-label">Best 90%</div>
            <div class="fake-score-val" style="font-size:1.1rem;color:var(--green)">$6.1M</div>
          </div>
        </div>
      </div>

      <div class="preview-lock">
        <div class="lock-icon">ğŸ”’</div>
        <div class="lock-text">Full Access â€” $39</div>
        <div class="lock-sub">One-time Â· Lifetime Â· Instant</div>
        <button class="btn-buy" style="margin-top:16px; font-size:0.6rem; padding:14px 28px;" onclick="openModal()">
          Unlock Now â†’
        </button>
      </div>
    </div>
  </div>
</section>

<!-- APP SECTION (hidden until unlocked) -->
<section class="app-section" id="appSection">
  <div style="margin-bottom:48px;">
    <div style="font-family:var(--mono);font-size:0.55rem;letter-spacing:0.22em;color:var(--gold);text-transform:uppercase;margin-bottom:8px;">// Full Access Unlocked</div>
    <h2 style="font-family:var(--serif);font-size:2.5rem;font-weight:300;letter-spacing:-0.02em;">Your FIRE Simulator</h2>
  </div>

  <!-- Score Cards -->
  <div class="scores-grid" style="margin-bottom:2px;">
    <div class="score-card" id="probCard">
      <div class="score-tag">FIRE Probability</div>
      <div class="score-num" id="probScore" style="color:var(--text2)">â€”</div>
      <div class="score-sub" id="probSub">Run simulation to calculate</div>
      <div class="score-bar"><div class="score-bar-fill" id="probBar" style="width:0%;background:var(--gold)"></div></div>
    </div>
    <div class="score-card">
      <div class="score-tag">FIRE Age</div>
      <div class="score-num" id="fireAge" style="color:var(--text2)">â€”</div>
      <div class="score-sub" id="fireAgeSub">At current savings rate</div>
    </div>
    <div class="score-card">
      <div class="score-tag">Coast FIRE Number</div>
      <div class="score-num" id="coastNum" style="font-size:2rem;color:var(--text2)">â€”</div>
      <div class="score-sub" id="coastSub">Amount needed to coast</div>
    </div>
  </div>

  <!-- Main Layout -->
  <div class="app-layout">
    <div class="inputs-panel">
      <div class="panel-label">// Portfolio Parameters</div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Current Portfolio</span>
          <span class="input-val" id="portVal">$500K</span>
        </div>
        <input type="range" id="portfolio" min="10000" max="5000000" step="10000" value="500000" oninput="fmtSlider('portVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Annual Spending (Retirement)</span>
          <span class="input-val" id="spendVal">$40K</span>
        </div>
        <input type="range" id="spending" min="10000" max="200000" step="1000" value="40000" oninput="fmtSlider('spendVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Annual Savings (Now)</span>
          <span class="input-val" id="savingsVal">$30K</span>
        </div>
        <input type="range" id="savings" min="0" max="200000" step="1000" value="30000" oninput="fmtSlider('savingsVal',this.value,'money')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Current Age</span>
          <span class="input-val" id="ageVal">35</span>
        </div>
        <input type="range" id="currentAge" min="20" max="65" step="1" value="35" oninput="fmtSlider('ageVal',this.value,'plain')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Target Retirement Age</span>
          <span class="input-val" id="retireVal">50</span>
        </div>
        <input type="range" id="retireAge" min="30" max="75" step="1" value="50" oninput="fmtSlider('retireVal',this.value,'plain')">
      </div>

      <div class="divider"></div>
      <div class="panel-label">// Market Assumptions</div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Expected Return</span>
          <span class="input-val" id="retVal">7.0%</span>
        </div>
        <input type="range" id="returnRate" min="3" max="12" step="0.1" value="7" oninput="fmtSlider('retVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Safe Withdrawal Rate</span>
          <span class="input-val" id="swrVal">4.0%</span>
        </div>
        <input type="range" id="swr" min="2" max="6" step="0.1" value="4" oninput="fmtSlider('swrVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row">
          <span class="input-name">Inflation Rate</span>
          <span class="input-val" id="inflVal">3.0%</span>
        </div>
        <input type="range" id="inflation" min="1" max="6" step="0.1" value="3" oninput="fmtSlider('inflVal',this.value,'pct')">
      </div>

      <div class="input-group">
        <div class="input-row"><span class="input-name">Retirement Duration</span></div>
        <select class="select-field" id="duration">
          <option value="30">30 years</option>
          <option value="40" selected>40 years</option>
          <option value="50">50 years</option>
          <option value="60">60 years</option>
        </select>
      </div>

      <button class="run-btn" id="runBtn" onclick="runSim()">
        <span>â–¶ Run 10,000 Simulations</span>
      </button>
    </div>

    <div class="chart-panel">
      <div class="panel-label">// Monte Carlo Output</div>
      <div class="chart-tabs">
        <button class="tab-btn active" onclick="switchTab('mc',this)">Paths</button>
        <button class="tab-btn" onclick="switchTab('dist',this)">Distribution</button>
        <button class="tab-btn" onclick="switchTab('ladder',this)">Withdrawal Ladder</button>
      </div>
      <canvas id="mainChart" height="320"></canvas>
    </div>
  </div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-label">Median Portfolio End</div>
      <div class="stat-val" id="statMedian" style="color:var(--gold)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Worst 10th Percentile</div>
      <div class="stat-val" id="statWorst" style="color:var(--red)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Best 90th Percentile</div>
      <div class="stat-val" id="statBest" style="color:var(--green)">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Required FIRE Number</div>
      <div class="stat-val" id="statFire">â€”</div>
    </div>
  </div>

  <!-- Scenarios -->
  <div class="scenarios-panel">
    <div class="panel-label">// Quick Scenarios</div>
    <div class="scenarios-grid">
      <button class="scenario-btn" onclick="applyScenario('base')">
        <div class="scenario-name">Base Case</div>
        <div class="scenario-desc">7% return Â· 3% inflation Â· Historical US average</div>
      </button>
      <button class="scenario-btn" onclick="applyScenario('conservative')">
        <div class="scenario-name">Conservative</div>
        <div class="scenario-desc">5% return Â· 3.5% inflation Â· Lower-return decade</div>
      </button>
      <button class="scenario-btn" onclick="applyScenario('bull')">
        <div class="scenario-name">Bull Market</div>
        <div class="scenario-desc">9% return Â· 2.5% inflation Â· Strong equity run</div>
      </button>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-left">Â© 2025 IGNITE â€” FIRE Probability Engine</div>
  <div class="footer-right">Built for the FIRE community Â· No subscription Â· No tracking</div>
</footer>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModalOutside(event)">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">âœ• Close</button>
    <div class="modal-eyebrow">One-time purchase Â· Lifetime access</div>
    <h2>Unlock<br>Full Access</h2>
    <div class="modal-price">$39 Â· Pay once Â· Use forever Â· 30-day guarantee</div>

    <ul class="modal-features">
      <li>10,000 Monte Carlo retirement path simulations</li>
      <li>FIRE Probability Score â€” one number, total clarity</li>
      <li>FIRE date calculator at current savings trajectory</li>
      <li>Coast FIRE number â€” when you can stop contributing</li>
      <li>Safe Withdrawal Rate sensitivity testing</li>
      <li>Withdrawal ladder with inflation modeling</li>
      <li>Base, Conservative, and Bull market scenarios</li>
      <li>P10 / Median / P90 percentile visualizations</li>
    </ul>

    <button class="btn-buy" style="width:100%;justify-content:center;" onclick="handlePurchase()">
      Pay $39 â€” Get Instant Access â†’
    </button>

    <div class="guarantee" style="margin-top:16px;justify-content:center;">
      <span>â—</span>
      <span>30-day money back guarantee Â· Secure payment via Stripe</span>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<script>
// â”€â”€â”€ Cursor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const cur = document.getElementById('cursor');
document.addEventListener('mousemove', e => {
  cur.style.left = e.clientX - 3 + 'px';
  cur.style.top  = e.clientY - 3 + 'px';
});

// â”€â”€â”€ Reveal on scroll â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const obs = new IntersectionObserver(entries => {
  entries.forEach((e, i) => {
    if (e.isIntersecting) {
      setTimeout(() => e.target.classList.add('visible'), i * 120);
    }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

// â”€â”€â”€ Paywall â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DEMO MODE: set to true to bypass paywall for testing
const DEMO_MODE = true;
let unlocked = DEMO_MODE;

// Check localStorage for purchase
if (localStorage.getItem('ignite_unlocked') === 'true') unlocked = true;
if (unlocked) showApp();

function handlePurchase() {
  // REPLACE THIS URL with your Stripe / Lemon Squeezy checkout link
  const CHECKOUT_URL = 'https://buy.stripe.com/YOUR_LINK_HERE';
  window.location.href = CHECKOUT_URL;

  // FOR DEMO/TESTING â€” comment out above and uncomment below:
  // unlocked = true;
  // localStorage.setItem('ignite_unlocked', 'true');
  // closeModal();
  // showApp();
  // document.getElementById('appSection').scrollIntoView({ behavior: 'smooth' });
}

function showApp() {
  document.getElementById('appSection').classList.add('unlocked');
  setTimeout(runSim, 300);
}

// â”€â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openModal() {
  if (unlocked) {
    document.getElementById('appSection').scrollIntoView({ behavior: 'smooth' });
    return;
  }
  document.getElementById('modalOverlay').classList.add('open');
}
function closeModal() { document.getElementById('modalOverlay').classList.remove('open'); }
function closeModalOutside(e) { if (e.target.id === 'modalOverlay') closeModal(); }

// â”€â”€â”€ Formatting â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function fmt(n) {
  const a = Math.abs(n);
  if (a >= 1e6) return '$' + (n/1e6).toFixed(2) + 'M';
  if (a >= 1e3) return '$' + (n/1e3).toFixed(0) + 'K';
  return '$' + Math.round(n);
}

function fmtSlider(id, val, type) {
  val = parseFloat(val);
  let out;
  if (type === 'money') out = fmt(val);
  else if (type === 'pct') out = val.toFixed(1) + '%';
  else out = String(Math.round(val));
  document.getElementById(id).textContent = out;
}

// â”€â”€â”€ Simulation Engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function randNorm(mean, std) {
  let u = 0, v = 0;
  while (!u) u = Math.random();
  while (!v) v = Math.random();
  return mean + std * Math.sqrt(-2 * Math.log(u)) * Math.cos(2 * Math.PI * v);
}

function monteCarlo(p, n = 10000) {
  const { portfolio, spending, savings, currentAge, retireAge, returnRate, inflation, duration } = p;
  const yrs = Math.max(0, retireAge - currentAge);
  const vol = 0.16;
  let successes = 0;
  const finals = [];
  const allPaths = [];

  for (let i = 0; i < n; i++) {
    let bal = portfolio;
    for (let y = 0; y < yrs; y++) bal = bal * (1 + randNorm(returnRate, vol)) + savings;

    const path = [Math.max(bal, 0)];
    let failed = false;
    for (let y = 0; y < duration; y++) {
      bal = bal * (1 + randNorm(returnRate - 0.005, vol)) - spending * Math.pow(1 + inflation, y);
      path.push(Math.max(bal, 0));
      if (bal <= 0) { failed = true; break; }
    }
    if (!failed) successes++;
    finals.push(bal);
    allPaths.push(path);
  }

  allPaths.sort((a, b) => (b[b.length-1]||0) - (a[a.length-1]||0));
  finals.sort((a, b) => a - b);

  return {
    probability: (successes / n) * 100,
    p10: allPaths[Math.floor(n * 0.9)],
    p50: allPaths[Math.floor(n * 0.5)],
    p90: allPaths[Math.floor(n * 0.1)],
    median: finals[Math.floor(n * 0.5)],
    worst10: Math.max(finals[Math.floor(n * 0.1)], 0),
    best90: finals[Math.floor(n * 0.9)],
    finals,
  };
}

function getParams() {
  return {
    portfolio:  +document.getElementById('portfolio').value,
    spending:   +document.getElementById('spending').value,
    savings:    +document.getElementById('savings').value,
    currentAge: +document.getElementById('currentAge').value,
    retireAge:  +document.getElementById('retireAge').value,
    returnRate: +document.getElementById('returnRate').value / 100,
    swr:        +document.getElementById('swr').value / 100,
    inflation:  +document.getElementById('inflation').value / 100,
    duration:   +document.getElementById('duration').value,
  };
}

function calcFire(p) {
  const fireNum = p.spending / p.swr;
  let bal = p.portfolio, yrs = 0;
  while (bal < fireNum && yrs < 60) { bal = bal * 1.07 + p.savings; yrs++; }
  return { fireNum, fireAge: p.currentAge + yrs, yrs };
}

function calcCoast(p) {
  const fireNum = p.spending / p.swr;
  return fireNum / Math.pow(1.07, Math.max(1, p.retireAge - p.currentAge));
}

// â”€â”€â”€ Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let chart = null, curTab = 'mc', lastResults = null, lastParams = null;

function switchTab(tab, el) {
  curTab = tab;
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  if (lastResults) renderChart(lastResults, lastParams);
}

function renderChart(r, p) {
  const ctx = document.getElementById('mainChart').getContext('2d');
  if (chart) chart.destroy();

  const dur = p.duration;
  const labels = Array.from({length: dur + 1}, (_, i) => p.retireAge + i);

  const baseOpts = {
    responsive: true,
    maintainAspectRatio: true,
    animation: { duration: 700, easing: 'easeOutQuart' },
    plugins: {
      legend: { display: curTab !== 'mc', labels: { color: '#4a4a52', font: { family: 'DM Mono', size: 9 } } },
      tooltip: {
        backgroundColor: '#161618',
        borderColor: '#2a2a30',
        borderWidth: 1,
        titleColor: '#c9a84c',
        bodyColor: '#8a8a8f',
        titleFont: { family: 'DM Mono', size: 9 },
        bodyFont:  { family: 'DM Mono', size: 9 },
      }
    },
    scales: {
      x: { grid: { color: 'rgba(255,255,255,0.02)' }, ticks: { color: '#4a4a52', font: { family: 'DM Mono', size: 8 }, maxTicksLimit: 8 } },
      y: { grid: { color: 'rgba(255,255,255,0.03)' }, ticks: { color: '#4a4a52', font: { family: 'DM Mono', size: 8 } } },
    }
  };

  if (curTab === 'mc') {
    chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [
          { label: 'P90', data: r.p90?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(61,153,112,0.7)', borderWidth:2, pointRadius:0, fill:false, tension:0.3 },
          { label: 'Median', data: r.p50?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(201,168,76,0.95)', borderWidth:2.5, pointRadius:0, fill:false, tension:0.3 },
          { label: 'P10', data: r.p10?.slice(0,dur+1).map(v=>Math.max(v,0)/1e6)||[], borderColor:'rgba(192,57,43,0.7)', borderWidth:2, pointRadius:0, fill:false, tension:0.3 },
        ]
      },
      options: { ...baseOpts }
    });
  } else if (curTab === 'dist') {
    const vals = r.finals.map(v => v/1e6);
    const mx = Math.min(Math.max(...vals.filter(v=>v<100)), 20);
    const mn = Math.min(...vals);
    const bins = 40, bs = (mx - mn) / bins;
    const counts = new Array(bins).fill(0);
    vals.forEach(v => { const i = Math.min(Math.floor((v-mn)/bs), bins-1); if (i>=0) counts[i]++; });
    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: counts.map((_,i) => (mn + i*bs).toFixed(1)),
        datasets: [{ label: 'Simulations', data: counts, backgroundColor: counts.map((_,i) => (mn+i*bs)<=0 ? 'rgba(192,57,43,0.5)' : 'rgba(201,168,76,0.4)'), borderWidth:0 }]
      },
      options: { ...baseOpts }
    });
  } else {
    const yrs = Array.from({length: dur}, (_, i) => i + 1);
    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: yrs.map(y => p.retireAge + y),
        datasets: [
          { label: 'Nominal ($K)', data: yrs.map(y => p.spending * Math.pow(1+p.inflation,y)/1e3), backgroundColor:'rgba(201,168,76,0.4)', borderWidth:0 },
          { label: "Real (Today's $K)", data: yrs.map(() => p.spending/1e3), backgroundColor:'rgba(61,153,112,0.3)', borderWidth:0 },
        ]
      },
      options: { ...baseOpts }
    });
  }
}

// â”€â”€â”€ Run Simulation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function runSim() {
  const btn = document.getElementById('runBtn');
  btn.disabled = true;
  btn.querySelector('span').textContent = 'âŸ³ Simulating 10,000 paths...';

  setTimeout(() => {
    const p = getParams();
    const r = monteCarlo(p);
    const fi = calcFire(p);
    const coast = calcCoast(p);
    lastResults = r; lastParams = p;

    // Update scores
    const prob = r.probability;
    const pEl = document.getElementById('probScore');
    pEl.textContent = prob.toFixed(1) + '%';
    pEl.style.color = prob >= 85 ? 'var(--green)' : prob >= 65 ? 'var(--gold)' : 'var(--red)';
    document.getElementById('probSub').textContent = prob >= 85 ? 'High confidence â€” solid plan' : prob >= 65 ? 'Moderate â€” consider adjustments' : 'High risk â€” revise now';
    document.getElementById('probBar').style.width = prob + '%';
    document.getElementById('probBar').style.background = prob >= 85 ? 'var(--green)' : prob >= 65 ? 'var(--gold)' : 'var(--red)';
    document.getElementById('probCard').classList.add('lit');

    document.getElementById('fireAge').textContent = fi.fireAge <= p.currentAge + 60 ? fi.fireAge : '70+';
    document.getElementById('fireAge').style.color = fi.fireAge <= p.retireAge ? 'var(--green)' : 'var(--gold)';
    document.getElementById('fireAgeSub').textContent = fi.fireAge <= p.retireAge ? `${fi.yrs} yrs â€” on track âœ“` : `${fi.yrs} yrs â€” ${fi.fireAge - p.retireAge} past target`;

    document.getElementById('coastNum').textContent = fmt(coast);
    document.getElementById('coastNum').style.color = p.portfolio >= coast ? 'var(--green)' : 'var(--text2)';
    document.getElementById('coastSub').textContent = p.portfolio >= coast ? 'âœ“ Coast FIRE achieved!' : `Need ${fmt(coast - p.portfolio)} more`;

    document.getElementById('statMedian').textContent = fmt(r.median);
    document.getElementById('statWorst').textContent = fmt(r.worst10);
    document.getElementById('statBest').textContent = fmt(r.best90);
    document.getElementById('statFire').textContent = fmt(fi.fireNum);

    renderChart(r, p);

    btn.disabled = false;
    btn.querySelector('span').textContent = 'â–¶ Run 10,000 Simulations';
  }, 60);
}

function applyScenario(name) {
  const s = { base:{ret:7,inf:3}, conservative:{ret:5,inf:3.5}, bull:{ret:9,inf:2.5} }[name];
  document.getElementById('returnRate').value = s.ret;
  document.getElementById('inflation').value = s.inf;
  document.getElementById('retVal').textContent = s.ret.toFixed(1) + '%';
  document.getElementById('inflVal').textContent = s.inf.toFixed(1) + '%';
  runSim();
}
</script>
</body>
</html>    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    background: rgba(10,10,11,0.92);
    backdrop-filter: blur(12px);
    z-index: 100;
  }

  .logo {
    font-family: var(--serif);
    font-size: 1.5rem;
    font-weight: 900;
    letter-spacing: -0.02em;
    color: var(--accent);
  }

  .logo span {
    color: var(--text2);
    font-weight: 400;
    font-size: 0.75rem;
    font-family: var(--mono);
    letter-spacing: 0.15em;
    display: block;
    margin-top: -4px;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .badge {
    font-family: var(--mono);
    font-size: 0.65rem;
    letter-spacing: 0.1em;
    color: var(--accent);
    border: 1px solid var(--accent);
    padding: 4px 10px;
    border-radius: 2px;
    text-transform: uppercase;
  }

  .btn-upgrade {
    background: var(--accent);
    color: #0a0a0b;
    border: none;
    padding: 8px 20px;
    font-family: var(--mono);
    font-size: 0.7rem;
    letter-spacing: 0.08em;
    cursor: pointer;
    font-weight: 500;
    border-radius: 2px;
    transition: opacity 0.2s;
  }
  .btn-upgrade:hover { opacity: 0.85; }

  .main {
    max-width: 1200px;
    margin: 0 auto;
    padding: 48px 40px;
  }

  .hero {
    margin-bottom: 56px;
    animation: fadeUp 0.6s ease both;
  }

  .hero-tag {
    font-family: var(--mono);
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 16px;
  }

  .hero h1 {
    font-family: var(--serif);
    font-size: clamp(2.2rem, 4vw, 3.8rem);
    font-weight: 900;
    line-height: 1.05;
    letter-spacing: -0.03em;
    margin-bottom: 16px;
  }

  .hero h1 em {
    font-style: normal;
    color: var(--accent);
  }

  .hero p {
    color: var(--text2);
    font-size: 0.95rem;
    max-width: 520px;
    line-height: 1.7;
  }

  /* Score display */
  .score-panel {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 2px;
    margin-bottom: 2px;
    animation: fadeUp 0.6s 0.1s ease both;
  }

  .score-card {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 32px;
    position: relative;
    overflow: hidden;
  }

  .score-card::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: var(--accent);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .score-card.active::after { transform: scaleX(1); }

  .score-label {
    font-family: var(--mono);
    font-size: 0.6rem;
    letter-spacing: 0.18em;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 16px;
  }

  .score-value {
    font-family: var(--serif);
    font-size: 3.5rem;
    font-weight: 900;
    line-height: 1;
    letter-spacing: -0.04em;
    transition: color 0.5s;
  }

  .score-value.good { color: var(--accent2); }
  .score-value.warn { color: var(--accent); }
  .score-value.bad { color: var(--danger); }

  .score-sub {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--text2);
    margin-top: 8px;
  }

  /* Main layout */
  .layout {
    display: grid;
    grid-template-columns: 380px 1fr;
    gap: 2px;
    animation: fadeUp 0.6s 0.2s ease both;
  }

  .inputs-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 32px;
  }

  .panel-title {
    font-family: var(--mono);
    font-size: 0.6rem;
    letter-spacing: 0.2em;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 28px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
  }

  .input-group {
    margin-bottom: 24px;
  }

  .input-label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }

  .input-label span:first-child {
    font-size: 0.8rem;
    color: var(--text2);
    font-family: var(--sans);
    font-weight: 300;
  }

  .input-label .val {
    font-family: var(--mono);
    font-size: 0.85rem;
    color: var(--accent);
    font-weight: 500;
  }

  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 2px;
    background: var(--border);
    outline: none;
    cursor: pointer;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    transition: transform 0.15s;
  }

  input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.3); }

  .input-number-wrap {
    position: relative;
  }

  .input-prefix {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--muted);
  }

  input[type="number"] {
    width: 100%;
    background: var(--surface2);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 10px 12px 10px 28px;
    font-family: var(--mono);
    font-size: 0.85rem;
    outline: none;
    transition: border-color 0.2s;
    -moz-appearance: textfield;
  }

  input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; }
  input[type="number"]:focus { border-color: var(--accent); }

  .divider {
    border: none;
    border-top: 1px solid var(--border);
    margin: 24px 0;
  }

  .select-wrap select {
    width: 100%;
    background: var(--surface2);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 10px 12px;
    font-family: var(--mono);
    font-size: 0.8rem;
    outline: none;
    cursor: pointer;
    appearance: none;
  }

  .btn-run {
    width: 100%;
    background: var(--accent);
    color: #0a0a0b;
    border: none;
    padding: 14px;
    font-family: var(--mono);
    font-size: 0.75rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    cursor: pointer;
    font-weight: 500;
    margin-top: 8px;
    border-radius: 1px;
    transition: opacity 0.2s, transform 0.1s;
  }
  .btn-run:hover { opacity: 0.9; }
  .btn-run:active { transform: scale(0.99); }

  /* Chart panel */
  .chart-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 32px;
    display: flex;
    flex-direction: column;
  }

  .chart-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 24px;
  }

  .chart-tabs {
    display: flex;
    gap: 2px;
    margin-bottom: 24px;
  }

  .tab {
    font-family: var(--mono);
    font-size: 0.6rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 6px 14px;
    cursor: pointer;
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    transition: all 0.2s;
  }

  .tab.active {
    background: var(--accent);
    color: #0a0a0b;
    border-color: var(--accent);
  }

  canvas {
    width: 100% !important;
    flex: 1;
  }

  /* Stats row */
  .stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2px;
    margin-bottom: 2px;
    animation: fadeUp 0.6s 0.3s ease both;
  }

  .stat-card {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 20px 24px;
  }

  .stat-label {
    font-family: var(--mono);
    font-size: 0.58rem;
    letter-spacing: 0.15em;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  .stat-value {
    font-family: var(--mono);
    font-size: 1.3rem;
    font-weight: 500;
    color: var(--text);
  }

  .stat-value.highlight { color: var(--accent); }
  .stat-value.good { color: var(--accent2); }
  .stat-value.bad { color: var(--danger); }

  /* Scenarios */
  .scenarios-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 32px;
    animation: fadeUp 0.6s 0.4s ease both;
    margin-bottom: 2px;
  }

  .scenarios-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 20px;
  }

  .scenario-card {
    background: var(--surface2);
    border: 1px solid var(--border);
    padding: 20px;
    cursor: pointer;
    transition: border-color 0.2s;
    position: relative;
    overflow: hidden;
  }

  .scenario-card:hover { border-color: var(--accent); }

  .scenario-card.locked::after {
    content: 'ğŸ”’ PRO';
    position: absolute;
    top: 8px; right: 8px;
    font-family: var(--mono);
    font-size: 0.55rem;
    letter-spacing: 0.08em;
    color: var(--accent);
    background: rgba(232,197,71,0.1);
    padding: 3px 6px;
    border-radius: 2px;
  }

  .scenario-name {
    font-family: var(--sans);
    font-size: 0.8rem;
    font-weight: 500;
    margin-bottom: 4px;
  }

  .scenario-desc {
    font-family: var(--mono);
    font-size: 0.65rem;
    color: var(--muted);
    line-height: 1.5;
  }

  /* Upgrade banner */
  .upgrade-banner {
    background: linear-gradient(135deg, rgba(232,197,71,0.08), rgba(232,197,71,0.03));
    border: 1px solid rgba(232,197,71,0.3);
    padding: 28px 32px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    animation: fadeUp 0.6s 0.5s ease both;
  }

  .upgrade-text h3 {
    font-family: var(--serif);
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .upgrade-text p {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--text2);
    letter-spacing: 0.05em;
  }

  .upgrade-features {
    display: flex;
    gap: 24px;
    margin: 0 32px;
  }

  .upgrade-feature {
    font-family: var(--mono);
    font-size: 0.65rem;
    color: var(--text2);
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .upgrade-feature::before {
    content: 'â†’';
    color: var(--accent);
  }

  .btn-buy {
    background: transparent;
    border: 1px solid var(--accent);
    color: var(--accent);
    padding: 12px 28px;
    font-family: var(--mono);
    font-size: 0.7rem;
    letter-spacing: 0.1em;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
  }

  .btn-buy:hover {
    background: var(--accent);
    color: #0a0a0b;
  }

  .price-tag {
    font-family: var(--serif);
    font-size: 0.9rem;
    color: var(--accent);
    font-weight: 700;
    display: block;
    margin-top: 2px;
  }

  /* Probability meter */
  .prob-meter {
    margin-top: 12px;
    height: 4px;
    background: var(--border);
    border-radius: 2px;
    overflow: hidden;
  }

  .prob-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 1.2s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Modal */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
    backdrop-filter: blur(4px);
  }

  .modal-overlay.open {
    opacity: 1;
    pointer-events: all;
  }

  .modal {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 48px;
    width: 480px;
    max-width: 90vw;
    transform: translateY(20px);
    transition: transform 0.3s;
  }

  .modal-overlay.open .modal { transform: translateY(0); }

  .modal h2 {
    font-family: var(--serif);
    font-size: 2rem;
    font-weight: 900;
    margin-bottom: 8px;
  }

  .modal-price {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--accent);
    margin-bottom: 24px;
    letter-spacing: 0.1em;
  }

  .modal-features {
    list-style: none;
    margin-bottom: 32px;
  }

  .modal-features li {
    font-family: var(--sans);
    font-size: 0.85rem;
    color: var(--text2);
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
    display: flex;
    gap: 10px;
  }

  .modal-features li::before {
    content: 'âœ¦';
    color: var(--accent);
    flex-shrink: 0;
  }

  .btn-close {
    background: none;
    border: none;
    color: var(--muted);
    font-family: var(--mono);
    font-size: 0.7rem;
    cursor: pointer;
    margin-top: 16px;
    letter-spacing: 0.08em;
  }

  .btn-close:hover { color: var(--text); }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 900px) {
    .main { padding: 24px 20px; }
    .header { padding: 16px 20px; }
    .score-panel { grid-template-columns: 1fr 1fr; }
    .layout { grid-template-columns: 1fr; }
    .stats-row { grid-template-columns: 1fr 1fr; }
    .scenarios-grid { grid-template-columns: 1fr 1fr; }
    .upgrade-banner { flex-direction: column; gap: 20px; text-align: center; }
    .upgrade-features { flex-direction: column; gap: 8px; align-items: center; }
  }
</style>
</head>
<body>

<header class="header">
  <div class="logo">
    IGNITE
    <span>FIRE PROBABILITY ENGINE</span>
  </div>
  <div class="header-right">
    <div class="badge">Free Tier</div>
    <button class="btn-upgrade" onclick="openModal()">Unlock Pro â€” $4.99/mo</button>
  </div>
</header>

<main class="main">

  <div class="hero">
    <div class="hero-tag">Monte Carlo Retirement Simulator</div>
    <h1>Will your money<br><em>outlive you?</em></h1>
    <p>Run 10,000 simulations across historical market conditions. Know your FIRE probability before you quit â€” not after.</p>
  </div>

  <!-- Score Cards -->
  <div class="score-panel" id="scorePanel">
    <div class="score-card active" id="probCard">
      <div class="score-label">FIRE Probability</div>
      <div class="score-value warn" id="probScore">â€”</div>
      <div class="score-sub" id="probSub">Run simulation to calculate</div>
      <div class="prob-meter"><div class="prob-fill" id="probFill" style="width:0%; background: var(--accent)"></div></div>
    </div>
    <div class="score-card" id="fireCard">
      <div class="score-label">FIRE Date</div>
      <div class="score-value" id="fireDate" style="font-size:2.2rem">â€”</div>
      <div class="score-sub" id="fireSub">At current savings rate</div>
    </div>
    <div class="score-card" id="coastCard">
      <div class="score-label">Coast FIRE Number</div>
      <div class="score-value highlight" id="coastNum" style="color:var(--text2)">â€”</div>
      <div class="score-sub" id="coastSub">Amount to coast to retirement</div>
    </div>
  </div>

  <!-- Main Layout -->
  <div class="layout">
    <div class="inputs-panel">
      <div class="panel-title">// Portfolio Parameters</div>

      <div class="input-group">
        <div class="input-label">
          <span>Current Portfolio Value</span>
          <span class="val" id="portVal">$500,000</span>
        </div>
        <input type="range" id="portfolio" min="10000" max="5000000" step="10000" value="500000" oninput="updateVal('portVal', this.value, '$', true)">
      </div>

      <div class="input-group">
        <div class="input-label">
          <span>Annual Spending (Retirement)</span>
          <span class="val" id="spendVal">$40,000</span>
        </div>
        <input type="range" id="spending" min="10000" max="200000" step="1000" value="40000" oninput="updateVal('spendVal', this.value, '$', true)">
      </div>

      <div class="input-group">
        <div class="input-label">
          <span>Annual Savings (Now)</span>
          <span class="val" id="savingsVal">$30,000</span>
        </div>
        <input type="range" id="savings" min="0" max="200000" step="1000" value="30000" oninput="updateVal('savingsVal', this.value, '$', true)">
      </div>

      <div class="input-group">
        <div class="input-label">
          <span>Current Age</span>
          <span class="val" id="ageVal">35</span>
        </div>
        <input type="range" id="currentAge" min="20" max="65" step="1" value="35" oninput="updateVal('ageVal', this.value, '', false)">
      </div>

      <div class="input-group">
        <div class="input-label">
          <span>Target Retirement Age</span>
          <span class="val" id="retireVal">50</span>
        </div>
        <input type="range" id="retireAge" min="35" max="75" step="1" value="50" oninput="updateVal('retireVal', this.value, '', false)">
      </div>

      <hr class="divider">
      <div class="panel-title">// Market Assumptions</div>

      <div class="input-group">
        <div class="input-label">
          <span>Expected Annual Return</span>
          <span class="val" id="returnVal">7.0%</span>
        </div>
        <input type="range" id="returnRate" min="3" max="12" step="0.1" value="7" oninput="updateVal('returnVal', this.value, '', false, '%')">
      </div>

      <div class="input-group">
        <div class="input-label">
          <span>Withdrawal Rate (SWR)</span>
          <span class="val" id="swrVal">4.0%</span>
        </div>
        <input type="range" id="swr" min="2" max="6" step="0.1" value="4" oninput="updateVal('swrVal', this.value, '', false, '%')">
      </div>

      <div class="input-group">
        <div class="input-label">
          <span>Inflation Rate</span>
          <span class="val" id="inflVal">3.0%</span>
        </div>
        <input type="range" id="inflation" min="1" max="6" step="0.1" value="3" oninput="updateVal('inflVal', this.value, '', false, '%')">
      </div>

      <div class="input-group">
        <div class="input-label"><span>Retirement Duration</span></div>
        <div class="select-wrap">
          <select id="duration">
            <option value="30">30 years</option>
            <option value="40" selected>40 years</option>
            <option value="50">50 years</option>
            <option value="60">60 years</option>
          </select>
        </div>
      </div>

      <button class="btn-run" onclick="runSimulation()">â–¶ RUN 10,000 SIMULATIONS</button>
    </div>

    <div class="chart-panel">
      <div class="chart-header">
        <div>
          <div class="panel-title">// Monte Carlo Output</div>
        </div>
      </div>
      <div class="chart-tabs">
        <button class="tab active" onclick="switchTab('mc')">Monte Carlo Paths</button>
        <button class="tab" onclick="switchTab('dist')">Success Distribution</button>
        <button class="tab" onclick="switchTab('ladder')">Withdrawal Ladder</button>
      </div>
      <canvas id="mainChart" height="340"></canvas>
    </div>
  </div>

  <!-- Stats Row -->
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-label">Median Portfolio at End</div>
      <div class="stat-value highlight" id="medianEnd">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Worst 10th Percentile</div>
      <div class="stat-value bad" id="worst10">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Best 90th Percentile</div>
      <div class="stat-value good" id="best90">â€”</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Required FIRE Number</div>
      <div class="stat-value" id="fireNumber">â€”</div>
    </div>
  </div>

  <!-- Scenarios -->
  <div class="scenarios-panel">
    <div class="panel-title">// Stress Test Scenarios</div>
    <div class="scenarios-grid">
      <div class="scenario-card" onclick="applyScenario('base')">
        <div class="scenario-name">Base Case</div>
        <div class="scenario-desc">7% return, 3% inflation. Historical US average.</div>
      </div>
      <div class="scenario-card" onclick="applyScenario('conservative')">
        <div class="scenario-name">Conservative</div>
        <div class="scenario-desc">5% return, 3.5% inflation. Lower-return decade.</div>
      </div>
      <div class="scenario-card" onclick="applyScenario('optimistic')">
        <div class="scenario-name">Bull Market</div>
        <div class="scenario-desc">9% return, 2.5% inflation. Strong equity run.</div>
      </div>
      <div class="scenario-card locked" onclick="openModal()">
        <div class="scenario-name">2000s Lost Decade</div>
        <div class="scenario-desc">Sequence of returns shock. Retire at peak, crash follows.</div>
      </div>
      <div class="scenario-card locked" onclick="openModal()">
        <div class="scenario-name">1970s Stagflation</div>
        <div class="scenario-desc">High inflation erodes purchasing power. The FIRE killer.</div>
      </div>
      <div class="scenario-card locked" onclick="openModal()">
        <div class="scenario-name">Global Diversified</div>
        <div class="scenario-desc">60/40 international allocation. Lower volatility path.</div>
      </div>
    </div>
  </div>

  <!-- Upgrade Banner -->
  <div class="upgrade-banner">
    <div class="upgrade-text">
      <h3>IGNITE Pro</h3>
      <p>The full arsenal for serious FIRE planning.</p>
      <span class="price-tag">$4.99 / month  Â·  or $39 one-time</span>
    </div>
    <div class="upgrade-features">
      <div class="upgrade-feature">Roth Conversion Ladder optimizer</div>
      <div class="upgrade-feature">Social Security integration</div>
      <div class="upgrade-feature">Tax-aware withdrawal sequencing</div>
      <div class="upgrade-feature">Historical crash scenarios</div>
      <div class="upgrade-feature">Exportable PDF report</div>
      <div class="upgrade-feature">Spouse / dual income modeling</div>
    </div>
    <button class="btn-buy" onclick="openModal()">Unlock Everything</button>
  </div>

</main>

<!-- Upgrade Modal -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModalOutside(event)">
  <div class="modal">
    <h2>Unlock IGNITE Pro</h2>
    <div class="modal-price">$4.99/month Â· Cancel anytime Â· or $39 one-time (best value)</div>
    <ul class="modal-features">
      <li>Full Monte Carlo with 10 historical crash scenarios</li>
      <li>Roth Conversion Ladder optimizer with tax bracket awareness</li>
      <li>Sequence of Returns Risk stress tester</li>
      <li>Social Security income modeling</li>
      <li>Dual income / spouse portfolio modeling</li>
      <li>Tax-efficient withdrawal order engine</li>
      <li>Exportable PDF FIRE report â€” share with your advisor</li>
      <li>Barista FIRE + Lean FIRE + Fat FIRE mode switching</li>
    </ul>
    <button class="btn-upgrade" style="width:100%; padding:14px; font-size:0.8rem;" onclick="handlePurchase()">
      Continue to Checkout â€” $39 one-time
    </button>
    <br>
    <button class="btn-upgrade" style="width:100%; padding:14px; margin-top:8px; background:var(--surface2); color:var(--text); font-size:0.8rem;" onclick="handleSubscribe()">
      Subscribe $4.99/month
    </button>
    <br>
    <button class="btn-close" onclick="closeModal()">â† No thanks, stay on free tier</button>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<script>
// â”€â”€â”€ Utility â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function fmt(n) {
  if (Math.abs(n) >= 1e6) return '$' + (n/1e6).toFixed(2) + 'M';
  if (Math.abs(n) >= 1e3) return '$' + (n/1e3).toFixed(0) + 'K';
  return '$' + n.toFixed(0);
}

function updateVal(id, val, prefix, money, suffix) {
  val = parseFloat(val);
  let display = money ? fmt(val) : (prefix + val + (suffix || ''));
  document.getElementById(id).textContent = display;
}

// â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

let chart = null;
let currentTab = 'mc';
let lastResults = null;

function getParams() {
  return {
    portfolio: +document.getElementById('portfolio').value,
    spending: +document.getElementById('spending').value,
    savings: +document.getElementById('savings').value,
    currentAge: +document.getElementById('currentAge').value,
    retireAge: +document.getElementById('retireAge').value,
    returnRate: +document.getElementById('returnRate').value / 100,
    swr: +document.getElementById('swr').value / 100,
    inflation: +document.getElementById('inflation').value / 100,
    duration: +document.getElementById('duration').value
  };
}

// â”€â”€â”€ Monte Carlo Simulation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function monteCarlo(params, simCount = 10000) {
  const { portfolio, spending, savings, currentAge, retireAge, returnRate, swr, inflation, duration } = params;
  const yearsToRetire = Math.max(0, retireAge - currentAge);
  const annualVol = 0.16; // historical ~16% equity vol

  const paths = [];
  let successes = 0;
  const finalValues = [];

  for (let sim = 0; sim < simCount; sim++) {
    // Accumulation phase
    let bal = portfolio;
    for (let y = 0; y < yearsToRetire; y++) {
      const r = randomNormal(returnRate, annualVol);
      bal = bal * (1 + r) + savings;
    }

    // Withdrawal phase
    let withdrawalStart = spending;
    const simPath = [bal];
    let failed = false;

    for (let y = 0; y < duration; y++) {
      const r = randomNormal(returnRate - 0.005, annualVol);
      const withdrawal = withdrawalStart * Math.pow(1 + inflation, y);
      bal = bal * (1 + r) - withdrawal;
      simPath.push(Math.max(bal, 0));
      if (bal <= 0) { failed = true; break; }
    }

    if (!failed) successes++;
    finalValues.push(bal);
    paths.push(simPath);
  }

  finalValues.sort((a,b) => a-b);
  const probability = (successes / simCount) * 100;

  // Sample 200 paths for charting
  const sample = [];
  const step = Math.floor(simCount / 200);
  for (let i = 0; i < simCount; i += step) sample.push(paths[i]);

  // percentile paths
  const p10 = paths[Math.floor(simCount * 0.10)];
  const p25 = paths[Math.floor(simCount * 0.25)];
  const p50 = paths[Math.floor(simCount * 0.50)];
  const p75 = paths[Math.floor(simCount * 0.75)];
  const p90 = paths[Math.floor(simCount * 0.90)];

  return {
    probability,
    finalValues,
    sample,
    p10, p25, p50, p75, p90,
    median: finalValues[Math.floor(simCount * 0.5)],
    worst10: finalValues[Math.floor(simCount * 0.1)],
    best90: finalValues[Math.floor(simCount * 0.9)],
  };
}

// Box-Muller normal random
function randomNormal(mean, std) {
  let u = 0, v = 0;
  while (u === 0) u = Math.random();
  while (v === 0) v = Math.random();
  return mean + std * Math.sqrt(-2 * Math.log(u)) * Math.cos(2 * Math.PI * v);
}

// â”€â”€â”€ FIRE Calculations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function calcFireDate(params) {
  const { portfolio, spending, savings, currentAge, swr } = params;
  const fireNumber = spending / swr;
  // Estimate years to FIRE number at 7% return
  let bal = portfolio;
  let years = 0;
  while (bal < fireNumber && years < 60) {
    bal = bal * 1.07 + savings;
    years++;
  }
  return { fireNumber, fireAge: currentAge + years, years };
}

function calcCoastFire(params) {
  const { spending, currentAge, retireAge, swr } = params;
  const fireNumber = spending / swr;
  const yearsToRetire = retireAge - currentAge;
  // How much do you need now to coast to FIRE number at 7%?
  const coast = fireNumber / Math.pow(1.07, yearsToRetire);
  return coast;
}

// â”€â”€â”€ Run & Display â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function runSimulation() {
  const btn = document.querySelector('.btn-run');
  btn.textContent = 'âŸ³ SIMULATING 10,000 PATHS...';
  btn.disabled = true;

  setTimeout(() => {
    const params = getParams();
    const results = monteCarlo(params);
    lastResults = { results, params };

    const { fireNumber, fireAge, years } = calcFireDate(params);
    const coast = calcCoastFire(params);

    // Update score cards
    const prob = results.probability;
    const probEl = document.getElementById('probScore');
    probEl.textContent = prob.toFixed(1) + '%';
    probEl.className = 'score-value ' + (prob >= 85 ? 'good' : prob >= 65 ? 'warn' : 'bad');
    document.getElementById('probSub').textContent = prob >= 85 ? 'High confidence. Your plan is solid.' : prob >= 65 ? 'Moderate confidence. Consider adjustments.' : 'High risk of running out. Revise plan.';
    document.getElementById('probFill').style.width = prob + '%';
    document.getElementById('probFill').style.background = prob >= 85 ? 'var(--accent2)' : prob >= 65 ? 'var(--accent)' : 'var(--danger)';

    document.getElementById('fireDate').textContent = fireAge <= params.currentAge + 60 ? fireAge.toFixed(0) : '70+';
    document.getElementById('fireDate').className = 'score-value ' + (fireAge <= params.retireAge ? 'good' : 'warn');
    document.getElementById('fireSub').textContent = fireAge <= params.retireAge ? `${years} years away â€” on track!` : `${years} yrs â€” ${fireAge - params.retireAge} yrs past target`;

    document.getElementById('coastNum').textContent = fmt(coast);
    document.getElementById('coastNum').style.color = params.portfolio >= coast ? 'var(--accent2)' : 'var(--accent)';
    document.getElementById('coastSub').textContent = params.portfolio >= coast ? 'âœ“ You\'ve hit Coast FIRE!' : `Need ${fmt(coast - params.portfolio)} more`;

    // Stats
    document.getElementById('medianEnd').textContent = fmt(results.median);
    document.getElementById('worst10').textContent = fmt(Math.max(results.worst10, 0));
    document.getElementById('best90').textContent = fmt(results.best90);
    document.getElementById('fireNumber').textContent = fmt(fireNumber);

    renderChart(results, params);

    document.querySelectorAll('.score-card').forEach(c => c.classList.add('active'));

    btn.textContent = 'â–¶ RUN 10,000 SIMULATIONS';
    btn.disabled = false;
  }, 80);
}

// â”€â”€â”€ Chart Rendering â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function switchTab(tab) {
  currentTab = tab;
  document.querySelectorAll('.tab').forEach((t, i) => {
    t.classList.toggle('active', ['mc','dist','ladder'][i] === tab);
  });
  if (lastResults) renderChart(lastResults.results, lastResults.params);
}

function renderChart(results, params) {
  const ctx = document.getElementById('mainChart').getContext('2d');
  if (chart) chart.destroy();

  const duration = params.duration;
  const labels = Array.from({length: duration + 1}, (_, i) => params.retireAge + i);

  if (currentTab === 'mc') {
    // Show percentile bands + sample paths
    const sampleDatasets = results.sample.slice(0, 80).map(path => ({
      data: path.slice(0, duration + 1).map(v => Math.max(v, 0) / 1e6),
      borderColor: 'rgba(232,197,71,0.07)',
      borderWidth: 1,
      pointRadius: 0,
      fill: false,
      tension: 0.3,
    }));

    chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [
          ...sampleDatasets,
          {
            label: 'P90',
            data: results.p90.slice(0, duration+1).map(v => Math.max(v,0)/1e6),
            borderColor: 'rgba(74,222,128,0.6)',
            borderWidth: 2,
            pointRadius: 0,
            fill: false,
            tension: 0.3,
          },
          {
            label: 'Median',
            data: results.p50.slice(0, duration+1).map(v => Math.max(v,0)/1e6),
            borderColor: 'rgba(232,197,71,0.9)',
            borderWidth: 2.5,
            pointRadius: 0,
            fill: false,
            tension: 0.3,
          },
          {
            label: 'P10',
            data: results.p10.slice(0, duration+1).map(v => Math.max(v,0)/1e6),
            borderColor: 'rgba(248,113,113,0.6)',
            borderWidth: 2,
            pointRadius: 0,
            fill: false,
            tension: 0.3,
          },
        ]
      },
      options: chartOptions('Portfolio Value ($M)', 'Age')
    });

  } else if (currentTab === 'dist') {
    // Histogram of final values
    const vals = results.finalValues.map(v => v / 1e6);
    const min = Math.min(...vals);
    const max = Math.max(...vals.filter(v => v < 50));
    const bins = 40;
    const binSize = (max - min) / bins;
    const counts = new Array(bins).fill(0);
    vals.forEach(v => {
      const idx = Math.min(Math.floor((v - min) / binSize), bins - 1);
      if (idx >= 0) counts[idx]++;
    });
    const binLabels = counts.map((_, i) => (min + i * binSize).toFixed(1));

    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: binLabels,
        datasets: [{
          label: 'Simulations',
          data: counts,
          backgroundColor: counts.map((_, i) => {
            const val = min + i * binSize;
            return val <= 0 ? 'rgba(248,113,113,0.6)' : 'rgba(232,197,71,0.5)';
          }),
          borderWidth: 0,
        }]
      },
      options: chartOptions('Simulation Count', 'Final Portfolio Value ($M)')
    });

  } else if (currentTab === 'ladder') {
    // Withdrawal ladder: spending adjusted for inflation each year
    const years = Array.from({length: duration}, (_, i) => i + 1);
    const nominal = years.map(y => params.spending * Math.pow(1 + params.inflation, y) / 1e3);
    const real = years.map(() => params.spending / 1e3);

    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: years.map(y => params.retireAge + y),
        datasets: [
          {
            label: 'Nominal Withdrawal ($K)',
            data: nominal,
            backgroundColor: 'rgba(232,197,71,0.5)',
            borderWidth: 0,
          },
          {
            label: 'Real (Today\'s $K)',
            data: real,
            backgroundColor: 'rgba(74,222,128,0.3)',
            borderWidth: 0,
          }
        ]
      },
      options: chartOptions('Amount ($K)', 'Age')
    });
  }
}

function chartOptions(yLabel, xLabel) {
  return {
    responsive: true,
    maintainAspectRatio: true,
    animation: { duration: 600, easing: 'easeOutQuart' },
    plugins: {
      legend: {
        display: currentTab !== 'mc',
        labels: { color: '#a1a1aa', font: { family: 'DM Mono', size: 10 } }
      },
      tooltip: {
        backgroundColor: '#18181c',
        borderColor: '#222228',
        borderWidth: 1,
        titleColor: '#e8c547',
        bodyColor: '#a1a1aa',
        titleFont: { family: 'DM Mono', size: 10 },
        bodyFont: { family: 'DM Mono', size: 10 },
        callbacks: {
          label: ctx => {
            const v = ctx.parsed.y;
            return ` ${yLabel.includes('$') ? '$' : ''}${v.toFixed(2)}${yLabel.includes('$M') ? 'M' : yLabel.includes('K') ? 'K' : ''}`;
          }
        }
      }
    },
    scales: {
      x: {
        grid: { color: 'rgba(255,255,255,0.03)' },
        ticks: { color: '#52525e', font: { family: 'DM Mono', size: 9 }, maxTicksLimit: 10 }
      },
      y: {
        grid: { color: 'rgba(255,255,255,0.04)' },
        ticks: { color: '#52525e', font: { family: 'DM Mono', size: 9 } }
      }
    }
  };
}

// â”€â”€â”€ Scenarios â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function applyScenario(name) {
  const scenarios = {
    base: { returnRate: 7, inflation: 3, swr: 4 },
    conservative: { returnRate: 5, inflation: 3.5, swr: 3.5 },
    optimistic: { returnRate: 9, inflation: 2.5, swr: 4.5 },
  };
  const s = scenarios[name];
  if (!s) return;
  document.getElementById('returnRate').value = s.returnRate;
  document.getElementById('inflation').value = s.inflation;
  document.getElementById('swr').value = s.swr;
  document.getElementById('returnVal').textContent = s.returnRate.toFixed(1) + '%';
  document.getElementById('inflVal').textContent = s.inflation.toFixed(1) + '%';
  document.getElementById('swrVal').textContent = s.swr.toFixed(1) + '%';
  runSimulation();
}

// â”€â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function openModal() {
  document.getElementById('modalOverlay').classList.add('open');
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
}

function closeModalOutside(e) {
  if (e.target === document.getElementById('modalOverlay')) closeModal();
}

function handlePurchase() {
  // Wire to Stripe / Lemon Squeezy / Paddle
  alert('Connect your payment processor here (Stripe, Lemon Squeezy, or Paddle).\n\nReplace this with: window.location.href = YOUR_CHECKOUT_LINK');
}

function handleSubscribe() {
  alert('Connect your subscription processor here.\n\nReplace this with: window.location.href = YOUR_SUBSCRIPTION_LINK');
}

// â”€â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Run on load with defaults
window.addEventListener('load', () => {
  setTimeout(runSimulation, 400);
});
</script>
</body>
</html>
